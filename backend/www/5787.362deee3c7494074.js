"use strict";(self.webpackChunkmyadminhn=self.webpackChunkmyadminhn||[]).push([[5787],{5787:(se,f,r)=>{r.r(f),r.d(f,{AgentesModule:()=>ae});var a=r(1180),I=r(7246),v=r(1380),m=r(805),b=r(7579),A=r(2722),k=r(4004),g=r(5698),e=r(4650),N=r(2340),x=r(529),_=r(629);let Z=(()=>{class i{constructor(n,t,o){(0,a.Z)(this,"http",void 0),(0,a.Z)(this,"authS",void 0),(0,a.Z)(this,"router",void 0),(0,a.Z)(this,"_prefix",N.H+"/api/agentes"),this.http=n,this.authS=t,this.router=o}getAll(n=[1,2]){this.authS.refreshToken();const t={cia_nids:this.authS.isValidCia(!1),docfis_nsts:n};return this.http.post(this._prefix+"/getall",t)}save(n){const t={...n,...this.authS.getUsuarioLog()};return this.http.post(this._prefix+"/save",t)}setSts(n){return this.http.post(this._prefix+"/setsts/"+n.agen_nid,{docfis_nsts:n.agen_nsts,...this.authS.getUsuarioLog()})}setBulkSts(n){return this.http.post(this._prefix+"/setbullksts",{data:n,...this.authS.getUsuarioLog()})}getCompanias(){const n={cia_nids:this.authS.isValidCia(!1)};return this.http.post(this._prefix+"/getallcompanias",n)}}return(0,a.Z)(i,"\u0275fac",function(n){return new(n||i)(e.LFG(x.eN),e.LFG(_.e),e.LFG(v.F0))}),(0,a.Z)(i,"\u0275prov",e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})),i})();var C=r(1168),h=r(6895),p=r(4006),d=r(99),J=r(3388),T=r(5593),w=r(5362),S=r(1795),F=r(2453),q=r(1383),y=r(1740),M=r(1493),U=r(2210);let E=(()=>{class i{constructor(n,t,o,s){(0,a.Z)(this,"dbapi",void 0),(0,a.Z)(this,"_builder",void 0),(0,a.Z)(this,"authS",void 0),(0,a.Z)(this,"skNsCore",void 0),(0,a.Z)(this,"createForm",void 0),(0,a.Z)(this,"guardando",!1),(0,a.Z)(this,"itemDialog",!1),(0,a.Z)(this,"submitted",!1),(0,a.Z)(this,"companias",[]),(0,a.Z)(this,"tiposAgentes",[]),(0,a.Z)(this,"$destroy",new b.x),(0,a.Z)(this,"agente",{}),(0,a.Z)(this,"edit",new e.vpe),this.dbapi=n,this._builder=t,this.authS=o,this.skNsCore=s,this.createForm=t.group({agen_nid:[0],cia_nid:["",p.kI.required],agen_vcodigo:["",p.kI.required],agen_vnombre:["",p.kI.required],agen_ntipo:["",p.kI.required],agen_nsts:[""]}),this.tiposAgentes=[{id:"",text:"...",obj:{}},{id:"1",text:"VENTAS",obj:{}},{id:"2",text:"COBROS",obj:{}},{id:"3",text:"AMBOS",obj:{}}],o.\u00f8bserverCompanySelected.pipe((0,A.R)(this.$destroy)).subscribe(c=>{this.getCompanias()})}ngOnInit(){}getCompanias(){this.companias=[],this.cia_nid?.setValue(""),this.dbapi.getCompanias().pipe((0,g.q)(1)).subscribe({next:n=>{if(n&&null!=n&&""!==n){for(const t in n)this.companias=[...this.companias,{id:n[t].cia_nid,text:n[t].cia_vnombre,obj:n[t]}];1==this.companias.length&&this.cia_nid?.setValue(this.companias[0])}else console.log("Error consultando compa\xf1\xedas")},error:n=>{console.log(n),this.edit.emit({type:"error",title:"Ha ocurrido un error",message:n})}})}ngOnChanges(){this.agente&&this.agente?.agen_nid&&this.agente?.agen_nid>0&&(this.agen_nid?.setValue(this.agente?.agen_nid),this.cia_nid?.setValue(this.searchById(this.agente?.cia_nid,this.companias)),this.agen_vcodigo?.setValue(this.agente?.agen_vcodigo),this.agen_vnombre?.setValue(this.agente?.agen_vnombre),this.agen_ntipo?.setValue(this.searchById(this.agente?.agen_ntipo,this.tiposAgentes)),this.agen_nsts?.setValue(this.agente?.agen_nsts))}save(){if(this.createForm.valid&&!this.guardando){this.guardando=!0;const n={agen_nid:this.agen_nid?.value>0?this.agen_nid?.value:null,cia_nid:this.cia_nid?.value.id,agen_vcodigo:this.agen_vcodigo?.value.trim().toUpperCase(),agen_vnombre:this.agen_vnombre?.value.trim().toUpperCase(),agen_ntipo:this.agen_ntipo?.value.id,agen_nsts:1};this.dbapi.save(n).pipe((0,g.q)(1)).subscribe({next:t=>{"success"==t.type&&(this.skNsCore.notificarUpsert("/ventas/agentes",this.authS.isValidCia(!1).toString(),this.authS.usuario.user_nid.toString(),!0),this.limpiarForm()),this.edit.emit(t),this.guardando=!1},error:t=>{console.log(t),this.guardando=!1,this.edit.emit({type:"error",title:"Ha ocurrido un error",message:t})}})}}limpiarForm(){this.createForm.reset(),this.agen_nid?.setValue(0)}hideDialog(){this.itemDialog=!1,this.submitted=!1}searchById(n,t){for(let o=0;o<t.length;o++){const s=t[o];if(s.id==n)return s}return""}ngOnDestroy(){this.$destroy.next(),this.$destroy.complete()}get agen_nid(){return this.createForm.get("agen_nid")}get cia_nid(){return this.createForm.get("cia_nid")}get agen_vcodigo(){return this.createForm.get("agen_vcodigo")}get agen_vnombre(){return this.createForm.get("agen_vnombre")}get agen_ntipo(){return this.createForm.get("agen_ntipo")}get agen_nsts(){return this.createForm.get("agen_nsts")}}return(0,a.Z)(i,"\u0275fac",function(n){return new(n||i)(e.Y36(Z),e.Y36(p.qu),e.Y36(_.e),e.Y36(C.pP))}),(0,a.Z)(i,"\u0275cmp",e.Xpm({type:i,selectors:[["app-create-agentes"]],inputs:{agente:"agente"},outputs:{edit:"edit"},features:[e.TTD],decls:30,vars:36,consts:[[1,"row"],[1,"col-12"],[1,"card"],[1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"field","grid"],["htmlFor","name3",1,"col-12","mb-2","md:col-2","md:mb-0","text-900"],[1,"col-12","md:col-10"],["optionLabel","text","formControlName","cia_nid",3,"options","filter","virtualScroll","virtualScrollItemSize"],["pInputText","","formControlName","agen_vcodigo","type","text","required","",2,"text-transform","uppercase"],["pInputText","","formControlName","agen_vnombre","type","text","required","",2,"text-transform","uppercase"],["optionLabel","text","formControlName","agen_ntipo",3,"options","filter","virtualScroll","virtualScrollItemSize"],[1,"col-5"],[1,"p-buttonset"],["pButton","","pRipple","","icon","pi pi-save","type","submit",1,"p-button-success","mr-1","btn-sm",3,"disabled","loading","label"],["pButton","","pRipple","","label","Limpiar","icon","pi pi-trash","type","button",1,"p-button-danger","btn-sm",3,"click"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3),e.NdJ("ngSubmit",function(){return t.save()}),e.TgZ(4,"div",4)(5,"label",5),e._uU(6,"Compa\xf1\xeda"),e.qZA(),e.TgZ(7,"div",6),e._UZ(8,"p-dropdown",7),e.qZA()(),e.TgZ(9,"div",4)(10,"label",5),e._uU(11,"C\xf3digo"),e.qZA(),e.TgZ(12,"div",6),e._UZ(13,"input",8),e.qZA()(),e.TgZ(14,"div",4)(15,"label",5),e._uU(16,"Nombre"),e.qZA(),e.TgZ(17,"div",6),e._UZ(18,"input",9),e.qZA()(),e.TgZ(19,"div",4)(20,"label",5),e._uU(21,"Tipo"),e.qZA(),e.TgZ(22,"div",6),e._UZ(23,"p-dropdown",10),e.qZA()(),e._UZ(24,"hr"),e.TgZ(25,"div",4)(26,"div",11)(27,"span",12),e._UZ(28,"button",13),e.TgZ(29,"button",14),e.NdJ("click",function(){return t.limpiarForm()}),e.qZA()()()()()()()()),2&n&&(e.xp6(3),e.Q6J("formGroup",t.createForm),e.xp6(5),e.ekj("ng-invalid",(null==t.cia_nid?null:t.cia_nid.invalid)&&(null==t.cia_nid?null:t.cia_nid.touched))("ng-dirty",(null==t.cia_nid?null:t.cia_nid.invalid)&&(null==t.cia_nid?null:t.cia_nid.touched))("ng-valid",(null==t.cia_nid?null:t.cia_nid.valid)&&((null==t.cia_nid?null:t.cia_nid.touched)||(null==t.cia_nid?null:t.cia_nid.dirty))),e.Q6J("options",t.companias)("filter",!1)("virtualScroll",t.companias.length>5)("virtualScrollItemSize",38),e.xp6(5),e.ekj("ng-invalid",(null==t.agen_vcodigo?null:t.agen_vcodigo.invalid)&&(null==t.agen_vcodigo?null:t.agen_vcodigo.touched))("ng-dirty",(null==t.agen_vcodigo?null:t.agen_vcodigo.invalid)&&(null==t.agen_vcodigo?null:t.agen_vcodigo.touched))("ng-valid",(null==t.agen_vcodigo?null:t.agen_vcodigo.valid)&&((null==t.agen_vcodigo?null:t.agen_vcodigo.touched)||(null==t.agen_vcodigo?null:t.agen_vcodigo.dirty))),e.xp6(5),e.ekj("ng-invalid",(null==t.agen_vnombre?null:t.agen_vnombre.invalid)&&(null==t.agen_vnombre?null:t.agen_vnombre.touched))("ng-dirty",(null==t.agen_vnombre?null:t.agen_vnombre.invalid)&&(null==t.agen_vnombre?null:t.agen_vnombre.touched))("ng-valid",(null==t.agen_vnombre?null:t.agen_vnombre.valid)&&((null==t.agen_vnombre?null:t.agen_vnombre.touched)||(null==t.agen_vnombre?null:t.agen_vnombre.dirty))),e.xp6(5),e.ekj("ng-invalid",(null==t.agen_ntipo?null:t.agen_ntipo.invalid)&&(null==t.agen_ntipo?null:t.agen_ntipo.touched))("ng-dirty",(null==t.agen_ntipo?null:t.agen_ntipo.invalid)&&(null==t.agen_ntipo?null:t.agen_ntipo.touched))("ng-valid",(null==t.agen_ntipo?null:t.agen_ntipo.valid)&&((null==t.agen_ntipo?null:t.agen_ntipo.touched)||(null==t.agen_ntipo?null:t.agen_ntipo.dirty))),e.Q6J("options",t.tiposAgentes)("filter",!1)("virtualScroll",!1)("virtualScrollItemSize",38),e.xp6(5),e.Q6J("disabled",!t.createForm.valid)("loading",t.guardando)("label",t.agente&&t.agente.agen_nid?"Editar":"Guardar"))},dependencies:[p._Y,p.Fj,p.JJ,p.JL,p.Q7,p.sg,p.u,T.Hq,S.H,y.o,U.Lt],styles:[".ng-valid[_ngcontent-%COMP%]{border-color:#2ecc71!important}"]})),i})();function R(i,l){1&i&&(e.TgZ(0,"div",22)(1,"h3",23),e._uU(2,"Listado de formas pagos"),e.qZA()())}function B(i,l){if(1&i){const n=e.EpF();e._UZ(0,"p-fileUpload",24),e.TgZ(1,"button",25),e.NdJ("click",function(){e.CHM(n),e.oxw();const o=e.MAs(8);return e.KtG(o.exportCSV())}),e.qZA()}2&i&&e.Q6J("maxFileSize",1e6)}function O(i,l){if(1&i){const n=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){e.CHM(n);const o=e.oxw(2);return e.KtG(o.deleteSelectedItems())}),e.qZA()}if(2&i){const n=e.oxw(2);e.Q6J("disabled",!n.selectedData||!n.selectedData.length)}}function H(i,l){if(1&i){const n=e.EpF();e.TgZ(0,"button",35),e.NdJ("click",function(){e.CHM(n);const o=e.oxw(2);return e.KtG(o.restartSelectedItems())}),e.qZA()}if(2&i){const n=e.oxw(2);e.Q6J("disabled",!n.selectedData||!n.selectedData.length)}}const V=function(){return{float:"right"}};function Q(i,l){if(1&i){const n=e.EpF();e.TgZ(0,"div",26)(1,"span",27)(2,"input",28),e.NdJ("input",function(o){e.CHM(n);const s=e.oxw(),c=e.MAs(8);return e.KtG(s.onGlobalFilter(c,o))}),e.qZA(),e.TgZ(3,"button",29),e.NdJ("click",function(){e.CHM(n);const o=e.oxw();return e.KtG(o.getData())}),e.qZA(),e.TgZ(4,"button",30),e.NdJ("click",function(){e.CHM(n);const o=e.oxw();return e.KtG(o.openNew())}),e.qZA(),e.YNc(5,O,1,1,"button",31),e.YNc(6,H,1,1,"button",32),e.TgZ(7,"p-selectButton",33),e.NdJ("ngModelChange",function(o){e.CHM(n);const s=e.oxw();return e.KtG(s.dataValue=o)})("click",function(){e.CHM(n);const o=e.oxw();return o.getData(),e.KtG(o.clearDataSelected())}),e.qZA()()()}if(2&i){const n=e.oxw();e.xp6(5),e.Q6J("ngIf",n.dataValue&&n.dataValue[0]>0),e.xp6(1),e.Q6J("ngIf",n.dataValue&&0===n.dataValue[0]),e.xp6(1),e.Q6J("options",n.dataOptions)("ngModel",n.dataValue)("ngStyle",e.DdM(5,V))}}function G(i,l){if(1&i&&(e.TgZ(0,"th",38),e._uU(1),e._UZ(2,"p-sortIcon",39),e.qZA()),2&i){const n=l.$implicit;e.ekj("rowStyle","ID"!==n.header)("rowStyleId","ID"===n.header),e.Q6J("pSortableColumn",n.field),e.xp6(1),e.hij(" ",n.header," "),e.xp6(1),e.Q6J("field",n.field)}}function Y(i,l){if(1&i&&(e.TgZ(0,"tr")(1,"th",36),e._UZ(2,"p-tableHeaderCheckbox"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Acciones"),e.qZA(),e.YNc(5,G,3,7,"th",37),e.qZA()),2&i){const n=e.oxw();e.xp6(5),e.Q6J("ngForOf",n.cols)}}function L(i,l){if(1&i){const n=e.EpF();e.TgZ(0,"button",46),e.NdJ("click",function(){e.CHM(n);const o=e.oxw().$implicit,s=e.oxw();return e.KtG(s.editRow(o))}),e.qZA()}}function K(i,l){if(1&i){const n=e.EpF();e.TgZ(0,"button",47),e.NdJ("click",function(){e.CHM(n);const o=e.oxw().$implicit,s=e.oxw();return e.KtG(s.deleteRow(o))}),e.qZA()}}function j(i,l){if(1&i){const n=e.EpF();e.TgZ(0,"button",48),e.NdJ("click",function(){e.CHM(n);const o=e.oxw().$implicit,s=e.oxw();return e.KtG(s.restartRow(o))}),e.qZA()}}function P(i,l){if(1&i&&(e.TgZ(0,"td")(1,"span",49),e._uU(2),e.qZA(),e._uU(3),e.qZA()),2&i){const n=l.$implicit,t=e.oxw().$implicit;e.xp6(2),e.Oqu(n.header),e.xp6(1),e.hij(" ",t[n.field]," ")}}function $(i,l){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e._UZ(2,"p-tableCheckbox",40),e.qZA(),e.TgZ(3,"td")(4,"div",41),e.YNc(5,L,1,0,"button",42),e.YNc(6,K,1,0,"button",43),e.YNc(7,j,1,0,"button",44),e.qZA()(),e.YNc(8,P,4,2,"td",45),e.qZA()),2&i){const n=l.$implicit,t=e.oxw();e.xp6(2),e.Q6J("value",n),e.xp6(3),e.Q6J("ngIf",n.agen_nsts>0),e.xp6(1),e.Q6J("ngIf",n.agen_nsts>0),e.xp6(1),e.Q6J("ngIf",n.agen_nsts<1),e.xp6(1),e.Q6J("ngForOf",t.cols)}}function z(i,l){if(1&i&&(e.TgZ(0,"span"),e._uU(1,"Estas seguro que quieres eliminar "),e.TgZ(2,"b"),e._uU(3),e.qZA(),e._uU(4,"?"),e.qZA()),2&i){const n=e.oxw();e.xp6(3),e.Oqu(n.item.agen_vnombre)}}function X(i,l){if(1&i){const n=e.EpF();e.TgZ(0,"button",50),e.NdJ("click",function(){e.CHM(n);const o=e.oxw();return e.KtG(o.deleteItemDialog=!1)}),e.qZA(),e.TgZ(1,"button",51),e.NdJ("click",function(){e.CHM(n);const o=e.oxw();return e.KtG(o.confirmDelete())}),e.qZA()}}function W(i,l){if(1&i){const n=e.EpF();e.TgZ(0,"button",50),e.NdJ("click",function(){e.CHM(n);const o=e.oxw();return e.KtG(o.deleteItemsDialog=!1)}),e.qZA(),e.TgZ(1,"button",51),e.NdJ("click",function(){e.CHM(n);const o=e.oxw();return e.KtG(o.confirmDeleteSelected())}),e.qZA()}}function ee(i,l){if(1&i&&(e.TgZ(0,"span"),e._uU(1,"Estas seguro que quieres restaurar "),e.TgZ(2,"b"),e._uU(3),e.qZA(),e._uU(4,"?"),e.qZA()),2&i){const n=e.oxw();e.xp6(3),e.Oqu(n.item.agen_vnombre)}}function te(i,l){if(1&i){const n=e.EpF();e.TgZ(0,"button",50),e.NdJ("click",function(){e.CHM(n);const o=e.oxw();return e.KtG(o.restartItemDialog=!1)}),e.qZA(),e.TgZ(1,"button",52),e.NdJ("click",function(){e.CHM(n);const o=e.oxw();return e.KtG(o.confirmRestart())}),e.qZA()}}function ne(i,l){if(1&i){const n=e.EpF();e.TgZ(0,"button",50),e.NdJ("click",function(){e.CHM(n);const o=e.oxw();return e.KtG(o.restartItemsDialog=!1)}),e.qZA(),e.TgZ(1,"button",52),e.NdJ("click",function(){e.CHM(n);const o=e.oxw();return e.KtG(o.confirmRestartSelected())}),e.qZA()}}const ie=function(){return[10,20,30]},D=function(){return{width:"750px"}},u=function(){return{width:"450px"}},oe=[{path:"",component:(()=>{class i{constructor(n,t,o,s){(0,a.Z)(this,"dbapi",void 0),(0,a.Z)(this,"messageService",void 0),(0,a.Z)(this,"authS",void 0),(0,a.Z)(this,"skNsCore",void 0),(0,a.Z)(this,"createDialog",!1),(0,a.Z)(this,"editDialog",!1),(0,a.Z)(this,"deleteItemDialog",!1),(0,a.Z)(this,"deleteItemsDialog",!1),(0,a.Z)(this,"restartItemDialog",!1),(0,a.Z)(this,"restartItemsDialog",!1),(0,a.Z)(this,"isLoadingTable",!1),(0,a.Z)(this,"data",[]),(0,a.Z)(this,"item",{}),(0,a.Z)(this,"selectedData",[]),(0,a.Z)(this,"submitted",!1),(0,a.Z)(this,"cols",[]),(0,a.Z)(this,"statuses",[]),(0,a.Z)(this,"dataOptions",[]),(0,a.Z)(this,"dataValue",[1]),(0,a.Z)(this,"rowsPerPageOptions",[5,10,20]),(0,a.Z)(this,"$destroy",new b.x),this.dbapi=n,this.messageService=t,this.authS=o,this.skNsCore=s,s.fromEvent("/ventas/agentes").pipe((0,A.R)(this.$destroy)).subscribe(c=>{this.skNsCore.socketId!=c&&(console.log("Event socket: agentes"),this.getData())}),this.cols=[{field:"agen_nid",header:"ID"},{field:"cia_vnombre",header:"Compa\xf1\xeda"},{field:"agen_vcodigo",header:"C\xf3digo"},{field:"agen_vnombre",header:"Nombre"},{field:"agen_vtipo",header:"Tipo"},{field:"agen_vsts",header:"Estado"}],this.dataOptions=[{name:"ACTIVOS",value:[1]},{name:"ELIMINADOS",value:[0]},{name:"TODOS",value:[-1,0,1]}],this.getData()}getData(){this.isLoadingTable=!0,this.dbapi.getAll(this.dataValue).pipe((0,k.U)(n=>(n.forEach(t=>{t.cia_vnombre=t.cias?t.cias.cia_vnombre:"",t.agen_vsts=1==t.agen_nsts?"ACTIVO":"ELIMINADO",t.agen_vtipo=1==t.agen_ntipo?"VENTAS":2==t.agen_ntipo?"COBROS":3==t.agen_ntipo?"AMBOS":"----"}),n)),(0,g.q)(1)).subscribe({next:n=>{this.data=[...n],this.isLoadingTable=!1},error:n=>{console.log(n),this.isLoadingTable=!1,this.editEvent({type:"error",title:"Ha ocurrido un error",message:n})}})}ngOnInit(){}openNew(){this.item={},this.submitted=!1,this.createDialog=!0}deleteSelectedData(){this.deleteItemsDialog=!0}restartSelectedItems(){this.restartItemsDialog=!0}editRow(n){this.item={...n},this.editDialog=!0}deleteRow(n){this.deleteItemDialog=!0,this.item={...n}}restartRow(n){this.restartItemDialog=!0,this.item={...n}}confirmDeleteSelected(){const n=[];this.selectedData.forEach(t=>{n.push({agen_nid:t.agen_nid,agen_nsts:0})}),this.dbapi.setBulkSts(n).pipe((0,g.q)(1)).subscribe({next:t=>{this.messageService.add({severity:t.type,summary:t.title,detail:t.message,life:3e3}),"success"==t.type&&(this.skNsCore.notificarUpsert("/ventas/agentes",this.authS.isValidCia(!1).toString(),this.authS.usuario.user_nid.toString(),!0),this.deleteItemsDialog=!1,this.selectedData=[],this.getData())},error:t=>{console.log(t),this.editEvent({type:"error",title:"Ha ocurrido un error",message:t})}})}confirmDelete(){this.dbapi.setSts({agen_nid:this.item.agen_nid,agen_nsts:0}).pipe((0,g.q)(1)).subscribe({next:t=>{this.skNsCore.notificarUpsert("/ventas/agentes",this.authS.isValidCia(!1).toString(),this.authS.usuario.user_nid.toString(),!0),this.messageService.add({severity:t.type,summary:t.title,detail:t.message,life:3e3}),this.deleteItemDialog=!1,this.item={},this.getData()},error:t=>{console.log(t),this.editEvent({type:"error",title:"Ha ocurrido un error",message:t})}})}confirmRestart(){this.item.agen_nsts=1,this.dbapi.setSts(this.item).pipe((0,g.q)(1)).subscribe({next:n=>{this.skNsCore.notificarUpsert("/ventas/agentes",this.authS.isValidCia(!1).toString(),this.authS.usuario.user_nid.toString()),this.messageService.add({severity:n.type,summary:n.title,detail:n.message,life:3e3}),this.restartItemDialog=!1,this.item={},this.getData()},error:n=>{console.log(n),this.editEvent({type:"error",title:"Ha ocurrido un error",message:n})}})}confirmRestartSelected(){this.selectedData.forEach(n=>{n.agen_nsts=1}),this.item.agen_nsts=1,this.dbapi.setBulkSts(this.selectedData).pipe((0,g.q)(1)).subscribe({next:n=>{this.messageService.add({severity:n.type,summary:n.title,detail:n.message,life:3e3}),"success"==n.type&&(this.skNsCore.notificarUpsert("/ventas/agentes",this.authS.isValidCia(!1).toString(),this.authS.usuario.user_nid.toString()),this.restartItemsDialog=!1,this.selectedData=[],this.getData())},error:n=>{console.log(n),this.editEvent({type:"error",title:"Ha ocurrido un error",message:n})}})}findIndexById(n){let t=-1;for(let o=0;o<this.data.length;o++)if(this.data[o].agen_nid===n){t=o;break}return t}onGlobalFilter(n,t){n.filterGlobal(t.target.value,"contains")}deleteSelectedItems(){this.deleteItemsDialog=!0}editEvent(n){this.messageService.add({severity:n.type,summary:n.title,detail:n.message,life:3e3}),"success"==n.type&&(this.getData(),this.createDialog=!1,this.editDialog=!1)}clearDataSelected(){this.selectedData=[]}ngOnDestroy(){this.$destroy.next(),this.$destroy.complete()}}return(0,a.Z)(i,"\u0275fac",function(n){return new(n||i)(e.Y36(Z),e.Y36(m.ez),e.Y36(_.e),e.Y36(C.pP))}),(0,a.Z)(i,"\u0275cmp",e.Xpm({type:i,selectors:[["ng-component"]],features:[e._Bn([m.ez])],decls:38,vars:45,consts:[[1,"grid"],[1,"col-12"],[1,"card","px-6","py-6"],["position","bottom-right"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","right"],["responsiveLayout","scroll","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","selectionMode","multiple","dataKey","agen_nid",3,"value","columns","rows","globalFilterFields","paginator","loading","rowsPerPageOptions","showCurrentPageReport","selection","rowHover","selectionChange"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["header","Crear agente",1,"p-fluid",3,"visible","modal","visibleChange"],[3,"edit"],["header","Editar agente",1,"p-fluid",3,"visible","modal","visibleChange"],[3,"agente","edit"],["header","Confirmar...",3,"visible","modal","visibleChange"],[1,"flex","align-items-center","justify-content-center"],[1,"pi","pi-exclamation-triangle","mr-3",2,"font-size","2rem"],[4,"ngIf"],["pTemplate","footer"],["header","Confirmar",3,"visible","modal","visibleChange"],[1,"my-2"],[1,"mb-2"],["mode","basic","accept","image/*","label","Import","chooseLabel","Import",1,"mr-2","inline-block",3,"maxFileSize"],["pButton","","pRipple","","label","Export","icon","pi pi-upload",1,"p-button-help",3,"click"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"block","mt-2","md:mt-0","p-input-icon-rigth"],["pInputText","","type","text","placeholder","Buscar...",1,"w-full","sm:w-auto","mr-1",3,"input"],["pButton","","pRipple","","label","","icon","pi pi-sync",1,"p-button-secondary","mr-1","ml-1",3,"click"],["pButton","","pRipple","","label","Crear","icon","pi pi-plus",1,"p-button-success","mr-1","ml-1",3,"click"],["pButton","","pRipple","","label","Eliminar","icon","pi pi-trash","class","p-button-danger mr-1 ml-1 mt-1",3,"disabled","click",4,"ngIf"],["pButton","","pRipple","","label","Restaurar","icon","pi pi-replay","class","p-button-help mr-1 ml-1 mt-1",3,"disabled","click",4,"ngIf"],["optionLabel","name","optionValue","value",1,"ml-3","mt-1",3,"options","ngModel","ngStyle","ngModelChange","click"],["pButton","","pRipple","","label","Eliminar","icon","pi pi-trash",1,"p-button-danger","mr-1","ml-1","mt-1",3,"disabled","click"],["pButton","","pRipple","","label","Restaurar","icon","pi pi-replay",1,"p-button-help","mr-1","ml-1","mt-1",3,"disabled","click"],[2,"width","3rem"],["style","width: 100rem",3,"pSortableColumn","rowStyle","rowStyleId",4,"ngFor","ngForOf"],[2,"width","100rem",3,"pSortableColumn"],[3,"field"],[3,"value"],[1,"flex"],["pButton","","pRipple","","icon","pi pi-pencil","class","p-button-success mr-1",3,"click",4,"ngIf"],["pButton","","pRipple","","icon","pi pi-trash","title","Eliminar","class","p-button-danger",3,"click",4,"ngIf"],["pButton","","pRipple","","icon","pi pi-replay","title","Restaurar","class","p-button-help",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-success","mr-1",3,"click"],["pButton","","pRipple","","icon","pi pi-trash","title","Eliminar",1,"p-button-danger",3,"click"],["pButton","","pRipple","","icon","pi pi-replay","title","Restaurar",1,"p-button-help",3,"click"],[1,"p-column-title"],["pButton","","pRipple","","icon","pi pi-times","label","No",1,"p-button-outlined","p-button-secondary",3,"click"],["pButton","","pRipple","","icon","pi pi-check","label","Si",1,"p-button-outlined","p-button-danger",3,"click"],["pButton","","pRipple","","icon","pi pi-check","label","Si",1,"p-button-outlined","p-button-help",3,"click"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"p-toast",3),e.TgZ(4,"p-toolbar",4),e.YNc(5,R,3,0,"ng-template",5),e.YNc(6,B,2,1,"ng-template",6),e.qZA(),e.TgZ(7,"p-table",7,8),e.NdJ("selectionChange",function(s){return t.selectedData=s}),e.YNc(9,Q,8,6,"ng-template",9),e.YNc(10,Y,6,1,"ng-template",10),e.YNc(11,$,9,5,"ng-template",11),e.qZA()(),e.TgZ(12,"p-dialog",12),e.NdJ("visibleChange",function(s){return t.createDialog=s}),e.TgZ(13,"app-create-agentes",13),e.NdJ("edit",function(s){return t.editEvent(s)}),e.qZA()(),e.TgZ(14,"p-dialog",14),e.NdJ("visibleChange",function(s){return t.editDialog=s}),e.TgZ(15,"app-create-agentes",15),e.NdJ("edit",function(s){return t.editEvent(s)}),e.qZA()(),e.TgZ(16,"p-dialog",16),e.NdJ("visibleChange",function(s){return t.deleteItemDialog=s}),e.TgZ(17,"div",17),e._UZ(18,"i",18),e.YNc(19,z,5,1,"span",19),e.qZA(),e.YNc(20,X,2,0,"ng-template",20),e.qZA(),e.TgZ(21,"p-dialog",21),e.NdJ("visibleChange",function(s){return t.deleteItemsDialog=s}),e.TgZ(22,"div",17),e._UZ(23,"i",18),e.TgZ(24,"span"),e._uU(25,"\xbfEst\xe1 seguro de que desea eliminar los elementos seleccionados?"),e.qZA()(),e.YNc(26,W,2,0,"ng-template",20),e.qZA(),e.TgZ(27,"p-dialog",16),e.NdJ("visibleChange",function(s){return t.restartItemDialog=s}),e.TgZ(28,"div",17),e._UZ(29,"i",18),e.YNc(30,ee,5,1,"span",19),e.qZA(),e.YNc(31,te,2,0,"ng-template",20),e.qZA(),e.TgZ(32,"p-dialog",21),e.NdJ("visibleChange",function(s){return t.restartItemsDialog=s}),e.TgZ(33,"div",17),e._UZ(34,"i",18),e.TgZ(35,"span"),e._uU(36,"\xbfEst\xe1 seguro de que desea restaurar los elementos seleccionados?"),e.qZA()(),e.YNc(37,ne,2,0,"ng-template",20),e.qZA()()()),2&n&&(e.xp6(7),e.Q6J("value",t.data)("columns",t.cols)("rows",10)("globalFilterFields",t.cols)("rows",10)("paginator",!0)("loading",t.isLoadingTable)("rowsPerPageOptions",e.DdM(38,ie))("showCurrentPageReport",!0)("selection",t.selectedData)("rowHover",!0),e.xp6(5),e.Akn(e.DdM(39,D)),e.Q6J("visible",t.createDialog)("modal",!0),e.xp6(2),e.Akn(e.DdM(40,D)),e.Q6J("visible",t.editDialog)("modal",!0),e.xp6(1),e.Q6J("agente",t.item),e.xp6(1),e.Akn(e.DdM(41,u)),e.Q6J("visible",t.deleteItemDialog)("modal",!0),e.xp6(3),e.Q6J("ngIf",t.item),e.xp6(2),e.Akn(e.DdM(42,u)),e.Q6J("visible",t.deleteItemsDialog)("modal",!0),e.xp6(6),e.Akn(e.DdM(43,u)),e.Q6J("visible",t.restartItemDialog)("modal",!0),e.xp6(3),e.Q6J("ngIf",t.item),e.xp6(2),e.Akn(e.DdM(44,u)),e.Q6J("visible",t.restartItemsDialog)("modal",!0))},dependencies:[h.sg,h.O5,h.PC,p.JJ,p.On,d.iA,m.jx,d.lQ,d.fz,d.UA,d.Mo,J.p,T.Hq,w.UN,S.H,F.FN,q.o,y.o,M.V,E],styles:[".rowStyle[_ngcontent-%COMP%]{width:14%;min-width:10rem}.rowStyleId[_ngcontent-%COMP%]{width:10%;min-width:6rem}"]})),i})()}];let ae=(()=>{class i{}return(0,a.Z)(i,"\u0275fac",function(n){return new(n||i)}),(0,a.Z)(i,"\u0275mod",e.oAB({type:i})),(0,a.Z)(i,"\u0275inj",e.cJS({imports:[I.m,v.Bz.forChild(oe)]})),i})()}}]);