"use strict";(self.webpackChunkmyadminhn=self.webpackChunkmyadminhn||[]).push([[977],{977:(ln,h,c)=>{c.r(h),c.d(h,{ConceptosInventariosModule:()=>an});var s=c(1180),D=c(7246),f=c(1380),_=c(805),b=c(7579),C=c(2722),N=c(4004),p=c(5698),n=c(4650),k=c(2340),J=c(529),m=c(629);let I=(()=>{class i{constructor(t,e,o){(0,s.Z)(this,"http",void 0),(0,s.Z)(this,"authS",void 0),(0,s.Z)(this,"router",void 0),(0,s.Z)(this,"_prefix",k.H+"/api/conceptosinventarios"),this.http=t,this.authS=e,this.router=o}getAll(t=[1,2]){this.authS.refreshToken();const e={cia_nids:this.authS.isValidCia(!1),docfis_nsts:t};return this.http.post(this._prefix+"/getall",e)}save(t){const e={...t,...this.authS.getUsuarioLog()};return this.http.post(this._prefix+"/save",e)}setSts(t){return this.http.post(this._prefix+"/setsts/"+t.coninv_nid,{docfis_nsts:t.coninv_nsts,...this.authS.getUsuarioLog()})}setBulkSts(t){return this.http.post(this._prefix+"/setbullksts",{data:t,...this.authS.getUsuarioLog()})}getCompanias(){const t={cia_nids:this.authS.isValidCia(!1)};return this.http.post(this._prefix+"/getallcompanias",t)}}return(0,s.Z)(i,"\u0275fac",function(t){return new(t||i)(n.LFG(J.eN),n.LFG(m.e),n.LFG(f.F0))}),(0,s.Z)(i,"\u0275prov",n.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})),i})();var Z=c(1168),g=c(6895),r=c(4006),d=c(99),w=c(3388),A=c(5593),q=c(5362),T=c(1795),F=c(2453),E=c(1383),S=c(1740),U=c(1493),R=c(2210);let M=(()=>{class i{constructor(t,e,o,a){(0,s.Z)(this,"dbapi",void 0),(0,s.Z)(this,"_builder",void 0),(0,s.Z)(this,"authS",void 0),(0,s.Z)(this,"skNsCore",void 0),(0,s.Z)(this,"createForm",void 0),(0,s.Z)(this,"guardando",!1),(0,s.Z)(this,"itemDialog",!1),(0,s.Z)(this,"submitted",!1),(0,s.Z)(this,"companias",[]),(0,s.Z)(this,"tiposConceptoInv",[]),(0,s.Z)(this,"bodegaConfiguracion",[]),(0,s.Z)(this,"SiNo",[]),(0,s.Z)(this,"$destroy",new b.x),(0,s.Z)(this,"conceptoInventario",{}),(0,s.Z)(this,"edit",new n.vpe),this.dbapi=t,this._builder=e,this.authS=o,this.skNsCore=a,this.createForm=e.group({coninv_nid:[0],cia_nid:["",r.kI.required],coninv_vdescripcion:["",r.kI.required],coninv_vobservaciones:["",r.kI.required],coninv_ntipo:["",r.kI.required],coninv_nbodegaconfigurada:["",r.kI.required],coninv_nisvencosteo:["",r.kI.required],coninv_ndevolucion:["",r.kI.required],coninv_nsts:[""]}),this.tiposConceptoInv=[{id:"",text:"...",obj:{}},{id:"1",text:"ENTRADA",obj:{}},{id:"2",text:"SALIDA",obj:{}},{id:"3",text:"TRANSFERENCIA",obj:{}}],this.bodegaConfiguracion=[{id:"",text:"...",obj:{}},{id:"0",text:"NO",obj:{}},{id:"1",text:"BODEGA PRINCIPAL",obj:{}},{id:"2",text:"BODEGA DEVOLUCIONES",obj:{}}],this.SiNo=[{id:"",text:"...",obj:{}},{id:"1",text:"SI",obj:{}},{id:"0",text:"NO",obj:{}}],o.\u00f8bserverCompanySelected.pipe((0,C.R)(this.$destroy)).subscribe(v=>{this.getCompanias()})}ngOnInit(){}getCompanias(){this.companias=[],this.cia_nid?.setValue(""),this.dbapi.getCompanias().pipe((0,p.q)(1)).subscribe({next:t=>{if(t&&null!=t&&""!==t){for(const e in t)this.companias=[...this.companias,{id:t[e].cia_nid,text:t[e].cia_vnombre,obj:t[e]}];1==this.companias.length&&this.cia_nid?.setValue(this.companias[0])}else console.log("Error consultando compa\xf1\xedas")},error:t=>{console.log(t),this.edit.emit({type:"error",title:"Ha ocurrido un error",message:t})}})}ngOnChanges(){this.conceptoInventario&&this.conceptoInventario?.coninv_nid&&this.conceptoInventario?.coninv_nid>0&&(this.coninv_nid?.setValue(this.conceptoInventario?.coninv_nid),this.cia_nid?.setValue(this.searchById(this.conceptoInventario?.cia_nid,this.companias)),this.coninv_vdescripcion?.setValue(this.conceptoInventario?.coninv_vdescripcion),this.coninv_vobservaciones?.setValue(this.conceptoInventario?.coninv_vobservaciones),this.coninv_ntipo?.setValue(this.searchById(this.conceptoInventario?.coninv_ntipo,this.tiposConceptoInv)),this.coninv_nbodegaconfigurada?.setValue(this.searchById(this.conceptoInventario?.coninv_nbodegaconfigurada,this.tiposConceptoInv)),this.coninv_nisvencosteo?.setValue(this.searchById(this.conceptoInventario?.coninv_nisvencosteo,this.SiNo)),this.coninv_ndevolucion?.setValue(this.searchById(this.conceptoInventario?.coninv_ndevolucion,this.SiNo)),this.coninv_nsts?.setValue(this.conceptoInventario?.coninv_nsts))}save(){if(this.createForm.valid&&!this.guardando){this.guardando=!0;const t={coninv_nid:this.coninv_nid?.value>0?this.coninv_nid?.value:null,cia_nid:this.cia_nid?.value.id,coninv_vdescripcion:this.coninv_vdescripcion?.value.trim().toUpperCase(),coninv_vobservaciones:this.coninv_vobservaciones?.value.trim().toUpperCase(),coninv_ntipo:this.coninv_ntipo?.value.id,coninv_nbodegaconfigurada:this.coninv_nbodegaconfigurada?.value.id,coninv_nisvencosteo:this.coninv_nisvencosteo?.value.id,coninv_ndevolucion:this.coninv_ndevolucion?.value.id,coninv_nsts:1};this.dbapi.save(t).pipe((0,p.q)(1)).subscribe({next:e=>{"success"==e.type&&(this.skNsCore.notificarUpsert("/inventarios/conceptosinventarios",this.authS.isValidCia(!1).toString(),this.authS.usuario.user_nid.toString(),!0),this.limpiarForm()),this.edit.emit(e),this.guardando=!1},error:e=>{console.log(e),this.guardando=!1,this.edit.emit({type:"error",title:"Ha ocurrido un error",message:e})}})}}limpiarForm(){this.createForm.reset(),this.coninv_nid?.setValue(0)}hideDialog(){this.itemDialog=!1,this.submitted=!1}searchById(t,e){for(let o=0;o<e.length;o++){const a=e[o];if(a.id==t)return a}return""}ngOnDestroy(){this.$destroy.next(),this.$destroy.complete()}get coninv_nid(){return this.createForm.get("coninv_nid")}get cia_nid(){return this.createForm.get("cia_nid")}get coninv_vdescripcion(){return this.createForm.get("coninv_vdescripcion")}get coninv_vobservaciones(){return this.createForm.get("coninv_vobservaciones")}get coninv_ntipo(){return this.createForm.get("coninv_ntipo")}get coninv_nbodegaconfigurada(){return this.createForm.get("coninv_nbodegaconfigurada")}get coninv_nisvencosteo(){return this.createForm.get("coninv_nisvencosteo")}get coninv_ndevolucion(){return this.createForm.get("coninv_ndevolucion")}get coninv_nsts(){return this.createForm.get("coninv_nsts")}}return(0,s.Z)(i,"\u0275fac",function(t){return new(t||i)(n.Y36(I),n.Y36(r.qu),n.Y36(m.e),n.Y36(Z.pP))}),(0,s.Z)(i,"\u0275cmp",n.Xpm({type:i,selectors:[["app-create-conceptos-inventarios"]],inputs:{conceptoInventario:"conceptoInventario"},outputs:{edit:"edit"},features:[n.TTD],decls:45,vars:66,consts:[[1,"row"],[1,"col-12"],[1,"card"],[1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"field","grid"],["htmlFor","name3",1,"col-12","mb-2","md:col-2","md:mb-0","text-900"],[1,"col-12","md:col-10"],["optionLabel","text","formControlName","cia_nid",3,"options","filter","virtualScroll","virtualScrollItemSize"],["pInputText","","formControlName","coninv_vdescripcion","type","text","required","",2,"text-transform","uppercase"],["pInputText","","formControlName","coninv_vobservaciones","type","text","required","",2,"text-transform","uppercase"],["optionLabel","text","formControlName","coninv_ntipo",3,"options","filter","virtualScroll","virtualScrollItemSize"],["optionLabel","text","formControlName","coninv_nbodegaconfigurada",3,"options","filter","virtualScroll","virtualScrollItemSize"],["optionLabel","text","formControlName","coninv_nisvencosteo",3,"options","filter","virtualScroll","virtualScrollItemSize"],["optionLabel","text","formControlName","coninv_ndevolucion",3,"options","filter","virtualScroll","virtualScrollItemSize"],[1,"col-5"],[1,"p-buttonset"],["pButton","","pRipple","","icon","pi pi-save","type","submit",1,"p-button-success","mr-1","btn-sm",3,"disabled","loading","label"],["pButton","","pRipple","","label","Limpiar","icon","pi pi-trash","type","button",1,"p-button-danger","btn-sm",3,"click"]],template:function(t,e){1&t&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3),n.NdJ("ngSubmit",function(){return e.save()}),n.TgZ(4,"div",4)(5,"label",5),n._uU(6,"Compa\xf1\xeda"),n.qZA(),n.TgZ(7,"div",6),n._UZ(8,"p-dropdown",7),n.qZA()(),n.TgZ(9,"div",4)(10,"label",5),n._uU(11,"Descripci\xf3n"),n.qZA(),n.TgZ(12,"div",6),n._UZ(13,"input",8),n.qZA()(),n.TgZ(14,"div",4)(15,"label",5),n._uU(16,"Observaciones"),n.qZA(),n.TgZ(17,"div",6),n._UZ(18,"input",9),n.qZA()(),n.TgZ(19,"div",4)(20,"label",5),n._uU(21,"Tipo"),n.qZA(),n.TgZ(22,"div",6),n._UZ(23,"p-dropdown",10),n.qZA()(),n.TgZ(24,"div",4)(25,"label",5),n._uU(26,"Bodega por defecto"),n.qZA(),n.TgZ(27,"div",6),n._UZ(28,"p-dropdown",11),n.qZA()(),n.TgZ(29,"div",4)(30,"label",5),n._uU(31,"ISV en costo"),n.qZA(),n.TgZ(32,"div",6),n._UZ(33,"p-dropdown",12),n.qZA()(),n.TgZ(34,"div",4)(35,"label",5),n._uU(36,"Para devoluciones"),n.qZA(),n.TgZ(37,"div",6),n._UZ(38,"p-dropdown",13),n.qZA()(),n._UZ(39,"hr"),n.TgZ(40,"div",4)(41,"div",14)(42,"span",15),n._UZ(43,"button",16),n.TgZ(44,"button",17),n.NdJ("click",function(){return e.limpiarForm()}),n.qZA()()()()()()()()),2&t&&(n.xp6(3),n.Q6J("formGroup",e.createForm),n.xp6(5),n.ekj("ng-invalid",(null==e.cia_nid?null:e.cia_nid.invalid)&&(null==e.cia_nid?null:e.cia_nid.touched))("ng-dirty",(null==e.cia_nid?null:e.cia_nid.invalid)&&(null==e.cia_nid?null:e.cia_nid.touched))("ng-valid",(null==e.cia_nid?null:e.cia_nid.valid)&&((null==e.cia_nid?null:e.cia_nid.touched)||(null==e.cia_nid?null:e.cia_nid.dirty))),n.Q6J("options",e.companias)("filter",!1)("virtualScroll",e.companias.length>5)("virtualScrollItemSize",38),n.xp6(5),n.ekj("ng-invalid",(null==e.coninv_vdescripcion?null:e.coninv_vdescripcion.invalid)&&(null==e.coninv_vdescripcion?null:e.coninv_vdescripcion.touched))("ng-dirty",(null==e.coninv_vdescripcion?null:e.coninv_vdescripcion.invalid)&&(null==e.coninv_vdescripcion?null:e.coninv_vdescripcion.touched))("ng-valid",(null==e.coninv_vdescripcion?null:e.coninv_vdescripcion.valid)&&((null==e.coninv_vdescripcion?null:e.coninv_vdescripcion.touched)||(null==e.coninv_vdescripcion?null:e.coninv_vdescripcion.dirty))),n.xp6(5),n.ekj("ng-invalid",(null==e.coninv_vobservaciones?null:e.coninv_vobservaciones.invalid)&&(null==e.coninv_vobservaciones?null:e.coninv_vobservaciones.touched))("ng-dirty",(null==e.coninv_vobservaciones?null:e.coninv_vobservaciones.invalid)&&(null==e.coninv_vobservaciones?null:e.coninv_vobservaciones.touched))("ng-valid",(null==e.coninv_vobservaciones?null:e.coninv_vobservaciones.valid)&&((null==e.coninv_vobservaciones?null:e.coninv_vobservaciones.touched)||(null==e.coninv_vobservaciones?null:e.coninv_vobservaciones.dirty))),n.xp6(5),n.ekj("ng-invalid",(null==e.coninv_ntipo?null:e.coninv_ntipo.invalid)&&(null==e.coninv_ntipo?null:e.coninv_ntipo.touched))("ng-dirty",(null==e.coninv_ntipo?null:e.coninv_ntipo.invalid)&&(null==e.coninv_ntipo?null:e.coninv_ntipo.touched))("ng-valid",(null==e.coninv_ntipo?null:e.coninv_ntipo.valid)&&((null==e.coninv_ntipo?null:e.coninv_ntipo.touched)||(null==e.coninv_ntipo?null:e.coninv_ntipo.dirty))),n.Q6J("options",e.tiposConceptoInv)("filter",!1)("virtualScroll",!1)("virtualScrollItemSize",38),n.xp6(5),n.ekj("ng-invalid",(null==e.coninv_nbodegaconfigurada?null:e.coninv_nbodegaconfigurada.invalid)&&(null==e.coninv_nbodegaconfigurada?null:e.coninv_nbodegaconfigurada.touched))("ng-dirty",(null==e.coninv_nbodegaconfigurada?null:e.coninv_nbodegaconfigurada.invalid)&&(null==e.coninv_nbodegaconfigurada?null:e.coninv_nbodegaconfigurada.touched))("ng-valid",(null==e.coninv_nbodegaconfigurada?null:e.coninv_nbodegaconfigurada.valid)&&((null==e.coninv_nbodegaconfigurada?null:e.coninv_nbodegaconfigurada.touched)||(null==e.coninv_nbodegaconfigurada?null:e.coninv_nbodegaconfigurada.dirty))),n.Q6J("options",e.bodegaConfiguracion)("filter",!1)("virtualScroll",!1)("virtualScrollItemSize",38),n.xp6(5),n.ekj("ng-invalid",(null==e.coninv_nisvencosteo?null:e.coninv_nisvencosteo.invalid)&&(null==e.coninv_nisvencosteo?null:e.coninv_nisvencosteo.touched))("ng-dirty",(null==e.coninv_nisvencosteo?null:e.coninv_nisvencosteo.invalid)&&(null==e.coninv_nisvencosteo?null:e.coninv_nisvencosteo.touched))("ng-valid",(null==e.coninv_nisvencosteo?null:e.coninv_nisvencosteo.valid)&&((null==e.coninv_nisvencosteo?null:e.coninv_nisvencosteo.touched)||(null==e.coninv_nisvencosteo?null:e.coninv_nisvencosteo.dirty))),n.Q6J("options",e.SiNo)("filter",!1)("virtualScroll",!1)("virtualScrollItemSize",38),n.xp6(5),n.ekj("ng-invalid",(null==e.coninv_ndevolucion?null:e.coninv_ndevolucion.invalid)&&(null==e.coninv_ndevolucion?null:e.coninv_ndevolucion.touched))("ng-dirty",(null==e.coninv_ndevolucion?null:e.coninv_ndevolucion.invalid)&&(null==e.coninv_ndevolucion?null:e.coninv_ndevolucion.touched))("ng-valid",(null==e.coninv_ndevolucion?null:e.coninv_ndevolucion.valid)&&((null==e.coninv_ndevolucion?null:e.coninv_ndevolucion.touched)||(null==e.coninv_ndevolucion?null:e.coninv_ndevolucion.dirty))),n.Q6J("options",e.SiNo)("filter",!1)("virtualScroll",!1)("virtualScrollItemSize",38),n.xp6(5),n.Q6J("disabled",!e.createForm.valid)("loading",e.guardando)("label",e.conceptoInventario&&e.conceptoInventario.coninv_nid?"Editar":"Guardar"))},dependencies:[r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.sg,r.u,A.Hq,T.H,S.o,R.Lt],styles:[".ng-valid[_ngcontent-%COMP%]{border-color:#2ecc71!important}"]})),i})();function O(i,l){1&i&&(n.TgZ(0,"div",22)(1,"h3",23),n._uU(2,"Listado de formas pagos"),n.qZA()())}function B(i,l){if(1&i){const t=n.EpF();n._UZ(0,"p-fileUpload",24),n.TgZ(1,"button",25),n.NdJ("click",function(){n.CHM(t),n.oxw();const o=n.MAs(8);return n.KtG(o.exportCSV())}),n.qZA()}2&i&&n.Q6J("maxFileSize",1e6)}function V(i,l){if(1&i){const t=n.EpF();n.TgZ(0,"button",34),n.NdJ("click",function(){n.CHM(t);const o=n.oxw(2);return n.KtG(o.deleteSelectedItems())}),n.qZA()}if(2&i){const t=n.oxw(2);n.Q6J("disabled",!t.selectedData||!t.selectedData.length)}}function x(i,l){if(1&i){const t=n.EpF();n.TgZ(0,"button",35),n.NdJ("click",function(){n.CHM(t);const o=n.oxw(2);return n.KtG(o.restartSelectedItems())}),n.qZA()}if(2&i){const t=n.oxw(2);n.Q6J("disabled",!t.selectedData||!t.selectedData.length)}}const H=function(){return{float:"right"}};function Q(i,l){if(1&i){const t=n.EpF();n.TgZ(0,"div",26)(1,"span",27)(2,"input",28),n.NdJ("input",function(o){n.CHM(t);const a=n.oxw(),v=n.MAs(8);return n.KtG(a.onGlobalFilter(v,o))}),n.qZA(),n.TgZ(3,"button",29),n.NdJ("click",function(){n.CHM(t);const o=n.oxw();return n.KtG(o.getData())}),n.qZA(),n.TgZ(4,"button",30),n.NdJ("click",function(){n.CHM(t);const o=n.oxw();return n.KtG(o.openNew())}),n.qZA(),n.YNc(5,V,1,1,"button",31),n.YNc(6,x,1,1,"button",32),n.TgZ(7,"p-selectButton",33),n.NdJ("ngModelChange",function(o){n.CHM(t);const a=n.oxw();return n.KtG(a.dataValue=o)})("click",function(){n.CHM(t);const o=n.oxw();return o.getData(),n.KtG(o.clearDataSelected())}),n.qZA()()()}if(2&i){const t=n.oxw();n.xp6(5),n.Q6J("ngIf",t.dataValue&&t.dataValue[0]>0),n.xp6(1),n.Q6J("ngIf",t.dataValue&&0===t.dataValue[0]),n.xp6(1),n.Q6J("options",t.dataOptions)("ngModel",t.dataValue)("ngStyle",n.DdM(5,H))}}function G(i,l){if(1&i&&(n.TgZ(0,"th",38),n._uU(1),n._UZ(2,"p-sortIcon",39),n.qZA()),2&i){const t=l.$implicit;n.ekj("rowStyle","ID"!==t.header)("rowStyleId","ID"===t.header),n.Q6J("pSortableColumn",t.field),n.xp6(1),n.hij(" ",t.header," "),n.xp6(1),n.Q6J("field",t.field)}}function L(i,l){if(1&i&&(n.TgZ(0,"tr")(1,"th",36),n._UZ(2,"p-tableHeaderCheckbox"),n.qZA(),n.TgZ(3,"th"),n._uU(4,"Acciones"),n.qZA(),n.YNc(5,G,3,7,"th",37),n.qZA()),2&i){const t=n.oxw();n.xp6(5),n.Q6J("ngForOf",t.cols)}}function j(i,l){if(1&i){const t=n.EpF();n.TgZ(0,"button",46),n.NdJ("click",function(){n.CHM(t);const o=n.oxw().$implicit,a=n.oxw();return n.KtG(a.editRow(o))}),n.qZA()}}function Y(i,l){if(1&i){const t=n.EpF();n.TgZ(0,"button",47),n.NdJ("click",function(){n.CHM(t);const o=n.oxw().$implicit,a=n.oxw();return n.KtG(a.deleteRow(o))}),n.qZA()}}function P(i,l){if(1&i){const t=n.EpF();n.TgZ(0,"button",48),n.NdJ("click",function(){n.CHM(t);const o=n.oxw().$implicit,a=n.oxw();return n.KtG(a.restartRow(o))}),n.qZA()}}function K(i,l){if(1&i&&(n.TgZ(0,"td")(1,"span",49),n._uU(2),n.qZA(),n._uU(3),n.qZA()),2&i){const t=l.$implicit,e=n.oxw().$implicit;n.xp6(2),n.Oqu(t.header),n.xp6(1),n.hij(" ",e[t.field]," ")}}function z(i,l){if(1&i&&(n.TgZ(0,"tr")(1,"td"),n._UZ(2,"p-tableCheckbox",40),n.qZA(),n.TgZ(3,"td")(4,"div",41),n.YNc(5,j,1,0,"button",42),n.YNc(6,Y,1,0,"button",43),n.YNc(7,P,1,0,"button",44),n.qZA()(),n.YNc(8,K,4,2,"td",45),n.qZA()),2&i){const t=l.$implicit,e=n.oxw();n.xp6(2),n.Q6J("value",t),n.xp6(3),n.Q6J("ngIf",t.agen_nsts>0),n.xp6(1),n.Q6J("ngIf",t.agen_nsts>0),n.xp6(1),n.Q6J("ngIf",t.agen_nsts<1),n.xp6(1),n.Q6J("ngForOf",e.cols)}}function $(i,l){if(1&i&&(n.TgZ(0,"span"),n._uU(1,"Estas seguro que quieres eliminar "),n.TgZ(2,"b"),n._uU(3),n.qZA(),n._uU(4,"?"),n.qZA()),2&i){const t=n.oxw();n.xp6(3),n.Oqu(t.item.coninv_vdescripcion)}}function X(i,l){if(1&i){const t=n.EpF();n.TgZ(0,"button",50),n.NdJ("click",function(){n.CHM(t);const o=n.oxw();return n.KtG(o.deleteItemDialog=!1)}),n.qZA(),n.TgZ(1,"button",51),n.NdJ("click",function(){n.CHM(t);const o=n.oxw();return n.KtG(o.confirmDelete())}),n.qZA()}}function W(i,l){if(1&i){const t=n.EpF();n.TgZ(0,"button",50),n.NdJ("click",function(){n.CHM(t);const o=n.oxw();return n.KtG(o.deleteItemsDialog=!1)}),n.qZA(),n.TgZ(1,"button",51),n.NdJ("click",function(){n.CHM(t);const o=n.oxw();return n.KtG(o.confirmDeleteSelected())}),n.qZA()}}function nn(i,l){if(1&i&&(n.TgZ(0,"span"),n._uU(1,"Estas seguro que quieres restaurar "),n.TgZ(2,"b"),n._uU(3),n.qZA(),n._uU(4,"?"),n.qZA()),2&i){const t=n.oxw();n.xp6(3),n.Oqu(t.item.coninv_vdescripcion)}}function en(i,l){if(1&i){const t=n.EpF();n.TgZ(0,"button",50),n.NdJ("click",function(){n.CHM(t);const o=n.oxw();return n.KtG(o.restartItemDialog=!1)}),n.qZA(),n.TgZ(1,"button",52),n.NdJ("click",function(){n.CHM(t);const o=n.oxw();return n.KtG(o.confirmRestart())}),n.qZA()}}function tn(i,l){if(1&i){const t=n.EpF();n.TgZ(0,"button",50),n.NdJ("click",function(){n.CHM(t);const o=n.oxw();return n.KtG(o.restartItemsDialog=!1)}),n.qZA(),n.TgZ(1,"button",52),n.NdJ("click",function(){n.CHM(t);const o=n.oxw();return n.KtG(o.confirmRestartSelected())}),n.qZA()}}const on=function(){return[10,20,30]},y=function(){return{width:"750px"}},u=function(){return{width:"450px"}},sn=[{path:"",component:(()=>{class i{constructor(t,e,o,a){(0,s.Z)(this,"dbapi",void 0),(0,s.Z)(this,"messageService",void 0),(0,s.Z)(this,"authS",void 0),(0,s.Z)(this,"skNsCore",void 0),(0,s.Z)(this,"createDialog",!1),(0,s.Z)(this,"editDialog",!1),(0,s.Z)(this,"deleteItemDialog",!1),(0,s.Z)(this,"deleteItemsDialog",!1),(0,s.Z)(this,"restartItemDialog",!1),(0,s.Z)(this,"restartItemsDialog",!1),(0,s.Z)(this,"isLoadingTable",!1),(0,s.Z)(this,"data",[]),(0,s.Z)(this,"item",{}),(0,s.Z)(this,"selectedData",[]),(0,s.Z)(this,"submitted",!1),(0,s.Z)(this,"cols",[]),(0,s.Z)(this,"statuses",[]),(0,s.Z)(this,"dataOptions",[]),(0,s.Z)(this,"dataValue",[1]),(0,s.Z)(this,"rowsPerPageOptions",[5,10,20]),(0,s.Z)(this,"$destroy",new b.x),this.dbapi=t,this.messageService=e,this.authS=o,this.skNsCore=a,a.fromEvent("/inventarios/conceptosinventarios").pipe((0,C.R)(this.$destroy)).subscribe(v=>{this.skNsCore.socketId!=v&&(console.log("Event socket: conceptos inventarios"),this.getData())}),this.cols=[{field:"coninv_nid",header:"ID"},{field:"cia_vnombre",header:"Compa\xf1\xeda"},{field:"coninv_vdescripcion",header:"Descripci\xf3n"},{field:"coninv_vobservaciones",header:"Observacion"},{field:"coninv_vtipo",header:"Tipo"},{field:"coninv_vbodegaconfigurada",header:"Bodega defecto"},{field:"coninv_visvencosteo",header:"ISV en costo"},{field:"coninv_vdevolucion",header:"Para devoluciones"},{field:"coninv_vsts",header:"Estado"}],this.dataOptions=[{name:"ACTIVOS",value:[1]},{name:"ELIMINADOS",value:[0]},{name:"TODOS",value:[-1,0,1]}],this.getData()}getData(){this.isLoadingTable=!0,this.dbapi.getAll(this.dataValue).pipe((0,N.U)(t=>(t.forEach(e=>{e.cia_vnombre=e.cias?e.cias.cia_vnombre:"",e.coninv_vsts=1==e.coninv_nsts?"ACTIVO":"ELIMINADO",e.coninv_vtipo=1==e.coninv_ntipo?"ENTRADA":2==e.coninv_ntipo?"SALIDA":3==e.coninv_ntipo?"TRANSFERENCIA":"----",e.coninv_vbodegaconfigurada=0==e.coninv_nbodegaconfigurada?"NO":1==e.coninv_nbodegaconfigurada?"BODEGA PRINCIPAL":2==e.coninv_nbodegaconfigurada?"BODEGA DEVOLUCIONES":"----",e.coninv_visvencosteo=1==e.coninv_nisvencosteo?"SI":"NO",e.coninv_vdevolucion=1==e.coninv_ndevolucion?"SI":"NO"}),t)),(0,p.q)(1)).subscribe({next:t=>{this.data=[...t],this.isLoadingTable=!1},error:t=>{console.log(t),this.isLoadingTable=!1,this.editEvent({type:"error",title:"Ha ocurrido un error",message:t})}})}ngOnInit(){}openNew(){this.item={},this.submitted=!1,this.createDialog=!0}deleteSelectedData(){this.deleteItemsDialog=!0}restartSelectedItems(){this.restartItemsDialog=!0}editRow(t){this.item={...t},this.editDialog=!0}deleteRow(t){this.deleteItemDialog=!0,this.item={...t}}restartRow(t){this.restartItemDialog=!0,this.item={...t}}confirmDeleteSelected(){const t=[];this.selectedData.forEach(e=>{t.push({coninv_nid:e.coninv_nid,coninv_nsts:0})}),this.dbapi.setBulkSts(t).pipe((0,p.q)(1)).subscribe({next:e=>{this.messageService.add({severity:e.type,summary:e.title,detail:e.message,life:3e3}),"success"==e.type&&(this.skNsCore.notificarUpsert("/inventarios/conceptosinventarios",this.authS.isValidCia(!1).toString(),this.authS.usuario.user_nid.toString(),!0),this.deleteItemsDialog=!1,this.selectedData=[],this.getData())},error:e=>{console.log(e),this.editEvent({type:"error",title:"Ha ocurrido un error",message:e})}})}confirmDelete(){this.dbapi.setSts({coninv_nid:this.item.coninv_nid,coninv_nsts:0}).pipe((0,p.q)(1)).subscribe({next:e=>{this.skNsCore.notificarUpsert("/inventarios/conceptosinventarios",this.authS.isValidCia(!1).toString(),this.authS.usuario.user_nid.toString(),!0),this.messageService.add({severity:e.type,summary:e.title,detail:e.message,life:3e3}),this.deleteItemDialog=!1,this.item={},this.getData()},error:e=>{console.log(e),this.editEvent({type:"error",title:"Ha ocurrido un error",message:e})}})}confirmRestart(){this.item.coninv_nsts=1,this.dbapi.setSts(this.item).pipe((0,p.q)(1)).subscribe({next:t=>{this.skNsCore.notificarUpsert("/inventarios/conceptosinventarios",this.authS.isValidCia(!1).toString(),this.authS.usuario.user_nid.toString()),this.messageService.add({severity:t.type,summary:t.title,detail:t.message,life:3e3}),this.restartItemDialog=!1,this.item={},this.getData()},error:t=>{console.log(t),this.editEvent({type:"error",title:"Ha ocurrido un error",message:t})}})}confirmRestartSelected(){this.selectedData.forEach(t=>{t.coninv_nsts=1}),this.item.coninv_nsts=1,this.dbapi.setBulkSts(this.selectedData).pipe((0,p.q)(1)).subscribe({next:t=>{this.messageService.add({severity:t.type,summary:t.title,detail:t.message,life:3e3}),"success"==t.type&&(this.skNsCore.notificarUpsert("/inventarios/conceptosinventarios",this.authS.isValidCia(!1).toString(),this.authS.usuario.user_nid.toString()),this.restartItemsDialog=!1,this.selectedData=[],this.getData())},error:t=>{console.log(t),this.editEvent({type:"error",title:"Ha ocurrido un error",message:t})}})}findIndexById(t){let e=-1;for(let o=0;o<this.data.length;o++)if(this.data[o].coninv_nid===t){e=o;break}return e}onGlobalFilter(t,e){t.filterGlobal(e.target.value,"contains")}deleteSelectedItems(){this.deleteItemsDialog=!0}editEvent(t){this.messageService.add({severity:t.type,summary:t.title,detail:t.message,life:3e3}),"success"==t.type&&(this.getData(),this.createDialog=!1,this.editDialog=!1)}clearDataSelected(){this.selectedData=[]}ngOnDestroy(){this.$destroy.next(),this.$destroy.complete()}}return(0,s.Z)(i,"\u0275fac",function(t){return new(t||i)(n.Y36(I),n.Y36(_.ez),n.Y36(m.e),n.Y36(Z.pP))}),(0,s.Z)(i,"\u0275cmp",n.Xpm({type:i,selectors:[["ng-component"]],features:[n._Bn([_.ez])],decls:38,vars:45,consts:[[1,"grid"],[1,"col-12"],[1,"card","px-6","py-6"],["position","bottom-right"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","right"],["responsiveLayout","scroll","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","selectionMode","multiple","dataKey","agen_nid",3,"value","columns","rows","globalFilterFields","paginator","loading","rowsPerPageOptions","showCurrentPageReport","selection","rowHover","selectionChange"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["header","Crear concepto inventario",1,"p-fluid",3,"visible","modal","visibleChange"],[3,"edit"],["header","Editar concepto inventario",1,"p-fluid",3,"visible","modal","visibleChange"],[3,"conceptoInventario","edit"],["header","Confirmar...",3,"visible","modal","visibleChange"],[1,"flex","align-items-center","justify-content-center"],[1,"pi","pi-exclamation-triangle","mr-3",2,"font-size","2rem"],[4,"ngIf"],["pTemplate","footer"],["header","Confirmar",3,"visible","modal","visibleChange"],[1,"my-2"],[1,"mb-2"],["mode","basic","accept","image/*","label","Import","chooseLabel","Import",1,"mr-2","inline-block",3,"maxFileSize"],["pButton","","pRipple","","label","Export","icon","pi pi-upload",1,"p-button-help",3,"click"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"block","mt-2","md:mt-0","p-input-icon-rigth"],["pInputText","","type","text","placeholder","Buscar...",1,"w-full","sm:w-auto","mr-1",3,"input"],["pButton","","pRipple","","label","","icon","pi pi-sync",1,"p-button-secondary","mr-1","ml-1",3,"click"],["pButton","","pRipple","","label","Crear","icon","pi pi-plus",1,"p-button-success","mr-1","ml-1",3,"click"],["pButton","","pRipple","","label","Eliminar","icon","pi pi-trash","class","p-button-danger mr-1 ml-1 mt-1",3,"disabled","click",4,"ngIf"],["pButton","","pRipple","","label","Restaurar","icon","pi pi-replay","class","p-button-help mr-1 ml-1 mt-1",3,"disabled","click",4,"ngIf"],["optionLabel","name","optionValue","value",1,"ml-3","mt-1",3,"options","ngModel","ngStyle","ngModelChange","click"],["pButton","","pRipple","","label","Eliminar","icon","pi pi-trash",1,"p-button-danger","mr-1","ml-1","mt-1",3,"disabled","click"],["pButton","","pRipple","","label","Restaurar","icon","pi pi-replay",1,"p-button-help","mr-1","ml-1","mt-1",3,"disabled","click"],[2,"width","3rem"],["style","width: 100rem",3,"pSortableColumn","rowStyle","rowStyleId",4,"ngFor","ngForOf"],[2,"width","100rem",3,"pSortableColumn"],[3,"field"],[3,"value"],[1,"flex"],["pButton","","pRipple","","icon","pi pi-pencil","class","p-button-success mr-1",3,"click",4,"ngIf"],["pButton","","pRipple","","icon","pi pi-trash","title","Eliminar","class","p-button-danger",3,"click",4,"ngIf"],["pButton","","pRipple","","icon","pi pi-replay","title","Restaurar","class","p-button-help",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-success","mr-1",3,"click"],["pButton","","pRipple","","icon","pi pi-trash","title","Eliminar",1,"p-button-danger",3,"click"],["pButton","","pRipple","","icon","pi pi-replay","title","Restaurar",1,"p-button-help",3,"click"],[1,"p-column-title"],["pButton","","pRipple","","icon","pi pi-times","label","No",1,"p-button-outlined","p-button-secondary",3,"click"],["pButton","","pRipple","","icon","pi pi-check","label","Si",1,"p-button-outlined","p-button-danger",3,"click"],["pButton","","pRipple","","icon","pi pi-check","label","Si",1,"p-button-outlined","p-button-help",3,"click"]],template:function(t,e){1&t&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2),n._UZ(3,"p-toast",3),n.TgZ(4,"p-toolbar",4),n.YNc(5,O,3,0,"ng-template",5),n.YNc(6,B,2,1,"ng-template",6),n.qZA(),n.TgZ(7,"p-table",7,8),n.NdJ("selectionChange",function(a){return e.selectedData=a}),n.YNc(9,Q,8,6,"ng-template",9),n.YNc(10,L,6,1,"ng-template",10),n.YNc(11,z,9,5,"ng-template",11),n.qZA()(),n.TgZ(12,"p-dialog",12),n.NdJ("visibleChange",function(a){return e.createDialog=a}),n.TgZ(13,"app-create-conceptos-inventarios",13),n.NdJ("edit",function(a){return e.editEvent(a)}),n.qZA()(),n.TgZ(14,"p-dialog",14),n.NdJ("visibleChange",function(a){return e.editDialog=a}),n.TgZ(15,"app-create-conceptos-inventarios",15),n.NdJ("edit",function(a){return e.editEvent(a)}),n.qZA()(),n.TgZ(16,"p-dialog",16),n.NdJ("visibleChange",function(a){return e.deleteItemDialog=a}),n.TgZ(17,"div",17),n._UZ(18,"i",18),n.YNc(19,$,5,1,"span",19),n.qZA(),n.YNc(20,X,2,0,"ng-template",20),n.qZA(),n.TgZ(21,"p-dialog",21),n.NdJ("visibleChange",function(a){return e.deleteItemsDialog=a}),n.TgZ(22,"div",17),n._UZ(23,"i",18),n.TgZ(24,"span"),n._uU(25,"\xbfEst\xe1 seguro de que desea eliminar los elementos seleccionados?"),n.qZA()(),n.YNc(26,W,2,0,"ng-template",20),n.qZA(),n.TgZ(27,"p-dialog",16),n.NdJ("visibleChange",function(a){return e.restartItemDialog=a}),n.TgZ(28,"div",17),n._UZ(29,"i",18),n.YNc(30,nn,5,1,"span",19),n.qZA(),n.YNc(31,en,2,0,"ng-template",20),n.qZA(),n.TgZ(32,"p-dialog",21),n.NdJ("visibleChange",function(a){return e.restartItemsDialog=a}),n.TgZ(33,"div",17),n._UZ(34,"i",18),n.TgZ(35,"span"),n._uU(36,"\xbfEst\xe1 seguro de que desea restaurar los elementos seleccionados?"),n.qZA()(),n.YNc(37,tn,2,0,"ng-template",20),n.qZA()()()),2&t&&(n.xp6(7),n.Q6J("value",e.data)("columns",e.cols)("rows",10)("globalFilterFields",e.cols)("rows",10)("paginator",!0)("loading",e.isLoadingTable)("rowsPerPageOptions",n.DdM(38,on))("showCurrentPageReport",!0)("selection",e.selectedData)("rowHover",!0),n.xp6(5),n.Akn(n.DdM(39,y)),n.Q6J("visible",e.createDialog)("modal",!0),n.xp6(2),n.Akn(n.DdM(40,y)),n.Q6J("visible",e.editDialog)("modal",!0),n.xp6(1),n.Q6J("conceptoInventario",e.item),n.xp6(1),n.Akn(n.DdM(41,u)),n.Q6J("visible",e.deleteItemDialog)("modal",!0),n.xp6(3),n.Q6J("ngIf",e.item),n.xp6(2),n.Akn(n.DdM(42,u)),n.Q6J("visible",e.deleteItemsDialog)("modal",!0),n.xp6(6),n.Akn(n.DdM(43,u)),n.Q6J("visible",e.restartItemDialog)("modal",!0),n.xp6(3),n.Q6J("ngIf",e.item),n.xp6(2),n.Akn(n.DdM(44,u)),n.Q6J("visible",e.restartItemsDialog)("modal",!0))},dependencies:[g.sg,g.O5,g.PC,r.JJ,r.On,d.iA,_.jx,d.lQ,d.fz,d.UA,d.Mo,w.p,A.Hq,q.UN,T.H,F.FN,E.o,S.o,U.V,M],styles:[".rowStyle[_ngcontent-%COMP%]{width:14%;min-width:10rem}.rowStyleId[_ngcontent-%COMP%]{width:10%;min-width:6rem}"]})),i})()}];let an=(()=>{class i{}return(0,s.Z)(i,"\u0275fac",function(t){return new(t||i)}),(0,s.Z)(i,"\u0275mod",n.oAB({type:i})),(0,s.Z)(i,"\u0275inj",n.cJS({imports:[D.m,f.Bz.forChild(sn)]})),i})()}}]);