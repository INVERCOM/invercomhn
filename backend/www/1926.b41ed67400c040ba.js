"use strict";(self.webpackChunkmyadminhn=self.webpackChunkmyadminhn||[]).push([[1926],{1926:(st,h,l)=>{l.r(h),l.d(h,{FormasPagosModule:()=>nt});var n=l(1180),S=l(7246),v=l(1380),u=l(805),b=l(7579),Z=l(2722),D=l(4004),d=l(5698),t=l(4650),I=l(2340),k=l(529),_=l(629);let C=(()=>{class i{constructor(o,e,a){(0,n.Z)(this,"http",void 0),(0,n.Z)(this,"authS",void 0),(0,n.Z)(this,"router",void 0),(0,n.Z)(this,"_prefix",I.H+"/api/formaspagos"),this.http=o,this.authS=e,this.router=a}getAll(o=[1,2]){this.authS.refreshToken();const e={cia_nids:this.authS.isValidCia(!1),docfis_nsts:o};return this.http.post(this._prefix+"/getall",e)}save(o){const e={...o,...this.authS.getUsuarioLog()};return this.http.post(this._prefix+"/save",e)}setSts(o){return this.http.post(this._prefix+"/setsts/"+o.forpag_nid,{docfis_nsts:o.forpag_nsts,...this.authS.getUsuarioLog()})}setBulkSts(o){return this.http.post(this._prefix+"/setbullksts",{data:o,...this.authS.getUsuarioLog()})}getCompanias(){const o={cia_nids:this.authS.isValidCia(!1)};return this.http.post(this._prefix+"/getallcompanias",o)}}return(0,n.Z)(i,"\u0275fac",function(o){return new(o||i)(t.LFG(k.eN),t.LFG(_.e),t.LFG(v.F0))}),(0,n.Z)(i,"\u0275prov",t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})),i})();var F=l(1168),f=l(6895),p=l(4006),c=l(99),N=l(3388),T=l(5593),x=l(5362),A=l(1795),J=l(2453),w=l(1383),P=l(1740),q=l(1493),U=l(2210);let M=(()=>{class i{constructor(o,e,a,s){(0,n.Z)(this,"dbapi",void 0),(0,n.Z)(this,"_builder",void 0),(0,n.Z)(this,"authS",void 0),(0,n.Z)(this,"skNsCore",void 0),(0,n.Z)(this,"createForm",void 0),(0,n.Z)(this,"guardando",!1),(0,n.Z)(this,"itemDialog",!1),(0,n.Z)(this,"submitted",!1),(0,n.Z)(this,"companias",[]),(0,n.Z)(this,"SiNo",[]),(0,n.Z)(this,"$destroy",new b.x),(0,n.Z)(this,"FormaPago",{}),(0,n.Z)(this,"edit",new t.vpe),this.dbapi=o,this._builder=e,this.authS=a,this.skNsCore=s,this.createForm=e.group({forpag_nid:[0],cia_nid:["",p.kI.required],forpag_vcodigo:["",p.kI.required],forpag_vdescripcion:["",p.kI.required],forpag_ndprocentajeadicional:["",p.kI.required],forpag_nsts:[""]}),this.SiNo=[{id:"",text:"...",obj:{}},{id:"1",text:"SI",obj:{}},{id:"0",text:"NO",obj:{}}],a.\u00f8bserverCompanySelected.pipe((0,Z.R)(this.$destroy)).subscribe(g=>{this.getCompanias()})}ngOnInit(){}getCompanias(){this.companias=[],this.cia_nid?.setValue(""),this.dbapi.getCompanias().pipe((0,d.q)(1)).subscribe({next:o=>{if(o&&null!=o&&""!==o){for(const e in o)this.companias=[...this.companias,{id:o[e].cia_nid,text:o[e].cia_vnombre,obj:o[e]}];1==this.companias.length&&this.cia_nid?.setValue(this.companias[0])}else console.log("Error consultando compa\xf1\xedas")},error:o=>{console.log(o),this.edit.emit({type:"error",title:"Ha ocurrido un error",message:o})}})}ngOnChanges(){this.FormaPago&&this.FormaPago?.forpag_nid&&this.FormaPago?.forpag_nid>0&&(this.forpag_nid?.setValue(this.FormaPago?.forpag_nid),this.cia_nid?.setValue(this.searchById(this.FormaPago?.cia_nid,this.companias)),this.forpag_vcodigo?.setValue(this.FormaPago?.forpag_vcodigo),this.forpag_vdescripcion?.setValue(this.FormaPago?.forpag_vdescripcion),this.forpag_ndprocentajeadicional?.setValue(this.FormaPago?.forpag_ndprocentajeadicional),this.forpag_nsts?.setValue(this.FormaPago?.forpag_nsts))}save(){if(this.createForm.valid&&!this.guardando){this.guardando=!0;const o={forpag_nid:this.forpag_nid?.value>0?this.forpag_nid?.value:null,cia_nid:this.cia_nid?.value.id,forpag_vcodigo:this.forpag_vcodigo?.value.trim().toUpperCase(),forpag_vdescripcion:this.forpag_vdescripcion?.value.trim().toUpperCase(),forpag_ndprocentajeadicional:this.forpag_ndprocentajeadicional?.value>0?this.forpag_ndprocentajeadicional?.value:0,forpag_nsts:1};this.dbapi.save(o).pipe((0,d.q)(1)).subscribe({next:e=>{"success"==e.type&&(this.skNsCore.notificarUpsert("/ventas/formaspagos",this.authS.isValidCia(!1).toString(),this.authS.usuario.user_nid.toString(),!0),this.limpiarForm()),this.edit.emit(e),this.guardando=!1},error:e=>{console.log(e),this.guardando=!1,this.edit.emit({type:"error",title:"Ha ocurrido un error",message:e})}})}}limpiarForm(){this.createForm.reset(),this.forpag_nid?.setValue(0)}hideDialog(){this.itemDialog=!1,this.submitted=!1}searchById(o,e){for(let a=0;a<e.length;a++){const s=e[a];if(s.id==o)return s}return""}ngOnDestroy(){this.$destroy.next(),this.$destroy.complete()}get forpag_nid(){return this.createForm.get("forpag_nid")}get cia_nid(){return this.createForm.get("cia_nid")}get forpag_vcodigo(){return this.createForm.get("forpag_vcodigo")}get forpag_vdescripcion(){return this.createForm.get("forpag_vdescripcion")}get forpag_ndprocentajeadicional(){return this.createForm.get("forpag_ndprocentajeadicional")}get forpag_nsts(){return this.createForm.get("forpag_nsts")}}return(0,n.Z)(i,"\u0275fac",function(o){return new(o||i)(t.Y36(C),t.Y36(p.qu),t.Y36(_.e),t.Y36(F.pP))}),(0,n.Z)(i,"\u0275cmp",t.Xpm({type:i,selectors:[["app-create-formas-pagos"]],inputs:{FormaPago:"FormaPago"},outputs:{edit:"edit"},features:[t.TTD],decls:30,vars:32,consts:[[1,"row"],[1,"col-12"],[1,"card"],[1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"field","grid"],["htmlFor","name3",1,"col-12","mb-2","md:col-2","md:mb-0","text-900"],[1,"col-12","md:col-10"],["optionLabel","text","formControlName","cia_nid",3,"options","filter","virtualScroll","virtualScrollItemSize"],["pInputText","","formControlName","forpag_vcodigo","type","text","required","",2,"text-transform","uppercase"],["pInputText","","formControlName","forpag_vdescripcion","type","text","required","",2,"text-transform","uppercase"],["pInputText","","formControlName","forpag_ndprocentajeadicional","type","number"],[1,"col-5"],[1,"p-buttonset"],["pButton","","pRipple","","icon","pi pi-save","type","submit",1,"p-button-success","mr-1","btn-sm",3,"disabled","loading","label"],["pButton","","pRipple","","label","Limpiar","icon","pi pi-trash","type","button",1,"p-button-danger","btn-sm",3,"click"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3),t.NdJ("ngSubmit",function(){return e.save()}),t.TgZ(4,"div",4)(5,"label",5),t._uU(6,"Compa\xf1\xeda"),t.qZA(),t.TgZ(7,"div",6),t._UZ(8,"p-dropdown",7),t.qZA()(),t.TgZ(9,"div",4)(10,"label",5),t._uU(11,"C\xf3digo"),t.qZA(),t.TgZ(12,"div",6),t._UZ(13,"input",8),t.qZA()(),t.TgZ(14,"div",4)(15,"label",5),t._uU(16,"Descripci\xf3n"),t.qZA(),t.TgZ(17,"div",6),t._UZ(18,"input",9),t.qZA()(),t.TgZ(19,"div",4)(20,"label",5),t._uU(21,"Cobro adicional (%)"),t.qZA(),t.TgZ(22,"div",6),t._UZ(23,"input",10),t.qZA()(),t._UZ(24,"hr"),t.TgZ(25,"div",4)(26,"div",11)(27,"span",12),t._UZ(28,"button",13),t.TgZ(29,"button",14),t.NdJ("click",function(){return e.limpiarForm()}),t.qZA()()()()()()()()),2&o&&(t.xp6(3),t.Q6J("formGroup",e.createForm),t.xp6(5),t.ekj("ng-invalid",(null==e.cia_nid?null:e.cia_nid.invalid)&&(null==e.cia_nid?null:e.cia_nid.touched))("ng-dirty",(null==e.cia_nid?null:e.cia_nid.invalid)&&(null==e.cia_nid?null:e.cia_nid.touched))("ng-valid",(null==e.cia_nid?null:e.cia_nid.valid)&&((null==e.cia_nid?null:e.cia_nid.touched)||(null==e.cia_nid?null:e.cia_nid.dirty))),t.Q6J("options",e.companias)("filter",!1)("virtualScroll",e.companias.length>5)("virtualScrollItemSize",38),t.xp6(5),t.ekj("ng-invalid",(null==e.forpag_vcodigo?null:e.forpag_vcodigo.invalid)&&(null==e.forpag_vcodigo?null:e.forpag_vcodigo.touched))("ng-dirty",(null==e.forpag_vcodigo?null:e.forpag_vcodigo.invalid)&&(null==e.forpag_vcodigo?null:e.forpag_vcodigo.touched))("ng-valid",(null==e.forpag_vcodigo?null:e.forpag_vcodigo.valid)&&((null==e.forpag_vcodigo?null:e.forpag_vcodigo.touched)||(null==e.forpag_vcodigo?null:e.forpag_vcodigo.dirty))),t.xp6(5),t.ekj("ng-invalid",(null==e.forpag_vdescripcion?null:e.forpag_vdescripcion.invalid)&&(null==e.forpag_vdescripcion?null:e.forpag_vdescripcion.touched))("ng-dirty",(null==e.forpag_vdescripcion?null:e.forpag_vdescripcion.invalid)&&(null==e.forpag_vdescripcion?null:e.forpag_vdescripcion.touched))("ng-valid",(null==e.forpag_vdescripcion?null:e.forpag_vdescripcion.valid)&&((null==e.forpag_vdescripcion?null:e.forpag_vdescripcion.touched)||(null==e.forpag_vdescripcion?null:e.forpag_vdescripcion.dirty))),t.xp6(5),t.ekj("ng-invalid",(null==e.forpag_ndprocentajeadicional?null:e.forpag_ndprocentajeadicional.invalid)&&(null==e.forpag_ndprocentajeadicional?null:e.forpag_ndprocentajeadicional.touched))("ng-dirty",(null==e.forpag_ndprocentajeadicional?null:e.forpag_ndprocentajeadicional.invalid)&&(null==e.forpag_ndprocentajeadicional?null:e.forpag_ndprocentajeadicional.touched))("ng-valid",(null==e.forpag_ndprocentajeadicional?null:e.forpag_ndprocentajeadicional.valid)&&((null==e.forpag_ndprocentajeadicional?null:e.forpag_ndprocentajeadicional.touched)||(null==e.forpag_ndprocentajeadicional?null:e.forpag_ndprocentajeadicional.dirty))),t.xp6(5),t.Q6J("disabled",!e.createForm.valid)("loading",e.guardando)("label",e.FormaPago&&e.FormaPago.forpag_nid?"Editar":"Guardar"))},dependencies:[p._Y,p.Fj,p.wV,p.JJ,p.JL,p.Q7,p.sg,p.u,T.Hq,A.H,P.o,U.Lt],styles:[".ng-valid[_ngcontent-%COMP%]{border-color:#2ecc71!important}"]})),i})();function E(i,r){1&i&&(t.TgZ(0,"div",22)(1,"h3",23),t._uU(2,"Listado de formas pagos"),t.qZA()())}function j(i,r){if(1&i){const o=t.EpF();t._UZ(0,"p-fileUpload",24),t.TgZ(1,"button",25),t.NdJ("click",function(){t.CHM(o),t.oxw();const a=t.MAs(8);return t.KtG(a.exportCSV())}),t.qZA()}2&i&&t.Q6J("maxFileSize",1e6)}function R(i,r){if(1&i){const o=t.EpF();t.TgZ(0,"button",34),t.NdJ("click",function(){t.CHM(o);const a=t.oxw(2);return t.KtG(a.deleteSelectedItems())}),t.qZA()}if(2&i){const o=t.oxw(2);t.Q6J("disabled",!o.selectedData||!o.selectedData.length)}}function H(i,r){if(1&i){const o=t.EpF();t.TgZ(0,"button",35),t.NdJ("click",function(){t.CHM(o);const a=t.oxw(2);return t.KtG(a.restartSelectedItems())}),t.qZA()}if(2&i){const o=t.oxw(2);t.Q6J("disabled",!o.selectedData||!o.selectedData.length)}}const B=function(){return{float:"right"}};function O(i,r){if(1&i){const o=t.EpF();t.TgZ(0,"div",26)(1,"span",27)(2,"input",28),t.NdJ("input",function(a){t.CHM(o);const s=t.oxw(),g=t.MAs(8);return t.KtG(s.onGlobalFilter(g,a))}),t.qZA(),t.TgZ(3,"button",29),t.NdJ("click",function(){t.CHM(o);const a=t.oxw();return t.KtG(a.getData())}),t.qZA(),t.TgZ(4,"button",30),t.NdJ("click",function(){t.CHM(o);const a=t.oxw();return t.KtG(a.openNew())}),t.qZA(),t.YNc(5,R,1,1,"button",31),t.YNc(6,H,1,1,"button",32),t.TgZ(7,"p-selectButton",33),t.NdJ("ngModelChange",function(a){t.CHM(o);const s=t.oxw();return t.KtG(s.dataValue=a)})("click",function(){t.CHM(o);const a=t.oxw();return a.getData(),t.KtG(a.clearDataSelected())}),t.qZA()()()}if(2&i){const o=t.oxw();t.xp6(5),t.Q6J("ngIf",o.dataValue&&o.dataValue[0]>0),t.xp6(1),t.Q6J("ngIf",o.dataValue&&0===o.dataValue[0]),t.xp6(1),t.Q6J("options",o.dataOptions)("ngModel",o.dataValue)("ngStyle",t.DdM(5,B))}}function V(i,r){if(1&i&&(t.TgZ(0,"th",38),t._uU(1),t._UZ(2,"p-sortIcon",39),t.qZA()),2&i){const o=r.$implicit;t.ekj("rowStyle","ID"!==o.header)("rowStyleId","ID"===o.header),t.Q6J("pSortableColumn",o.field),t.xp6(1),t.hij(" ",o.header," "),t.xp6(1),t.Q6J("field",o.field)}}function Q(i,r){if(1&i&&(t.TgZ(0,"tr")(1,"th",36),t._UZ(2,"p-tableHeaderCheckbox"),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Acciones"),t.qZA(),t.YNc(5,V,3,7,"th",37),t.qZA()),2&i){const o=t.oxw();t.xp6(5),t.Q6J("ngForOf",o.cols)}}function G(i,r){if(1&i){const o=t.EpF();t.TgZ(0,"button",46),t.NdJ("click",function(){t.CHM(o);const a=t.oxw().$implicit,s=t.oxw();return t.KtG(s.editRow(a))}),t.qZA()}}function Y(i,r){if(1&i){const o=t.EpF();t.TgZ(0,"button",47),t.NdJ("click",function(){t.CHM(o);const a=t.oxw().$implicit,s=t.oxw();return t.KtG(s.deleteRow(a))}),t.qZA()}}function L(i,r){if(1&i){const o=t.EpF();t.TgZ(0,"button",48),t.NdJ("click",function(){t.CHM(o);const a=t.oxw().$implicit,s=t.oxw();return t.KtG(s.restartRow(a))}),t.qZA()}}function K(i,r){if(1&i&&(t.TgZ(0,"td")(1,"span",49),t._uU(2),t.qZA(),t._uU(3),t.qZA()),2&i){const o=r.$implicit,e=t.oxw().$implicit;t.xp6(2),t.Oqu(o.header),t.xp6(1),t.hij(" ",e[o.field]," ")}}function $(i,r){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._UZ(2,"p-tableCheckbox",40),t.qZA(),t.TgZ(3,"td")(4,"div",41),t.YNc(5,G,1,0,"button",42),t.YNc(6,Y,1,0,"button",43),t.YNc(7,L,1,0,"button",44),t.qZA()(),t.YNc(8,K,4,2,"td",45),t.qZA()),2&i){const o=r.$implicit,e=t.oxw();t.xp6(2),t.Q6J("value",o),t.xp6(3),t.Q6J("ngIf",o.forpag_nsts>0),t.xp6(1),t.Q6J("ngIf",o.forpag_nsts>0),t.xp6(1),t.Q6J("ngIf",o.forpag_nsts<1),t.xp6(1),t.Q6J("ngForOf",e.cols)}}function z(i,r){if(1&i&&(t.TgZ(0,"span"),t._uU(1,"Estas seguro que quieres eliminar "),t.TgZ(2,"b"),t._uU(3),t.qZA(),t._uU(4,"?"),t.qZA()),2&i){const o=t.oxw();t.xp6(3),t.Oqu(o.item.forpag_vdescripcion)}}function X(i,r){if(1&i){const o=t.EpF();t.TgZ(0,"button",50),t.NdJ("click",function(){t.CHM(o);const a=t.oxw();return t.KtG(a.deleteItemDialog=!1)}),t.qZA(),t.TgZ(1,"button",51),t.NdJ("click",function(){t.CHM(o);const a=t.oxw();return t.KtG(a.confirmDelete())}),t.qZA()}}function W(i,r){if(1&i){const o=t.EpF();t.TgZ(0,"button",50),t.NdJ("click",function(){t.CHM(o);const a=t.oxw();return t.KtG(a.deleteItemsDialog=!1)}),t.qZA(),t.TgZ(1,"button",51),t.NdJ("click",function(){t.CHM(o);const a=t.oxw();return t.KtG(a.confirmDeleteSelected())}),t.qZA()}}function tt(i,r){if(1&i&&(t.TgZ(0,"span"),t._uU(1,"Estas seguro que quieres restaurar "),t.TgZ(2,"b"),t._uU(3),t.qZA(),t._uU(4,"?"),t.qZA()),2&i){const o=t.oxw();t.xp6(3),t.Oqu(o.item.forpag_vdescripcion)}}function et(i,r){if(1&i){const o=t.EpF();t.TgZ(0,"button",50),t.NdJ("click",function(){t.CHM(o);const a=t.oxw();return t.KtG(a.restartItemDialog=!1)}),t.qZA(),t.TgZ(1,"button",52),t.NdJ("click",function(){t.CHM(o);const a=t.oxw();return t.KtG(a.confirmRestart())}),t.qZA()}}function ot(i,r){if(1&i){const o=t.EpF();t.TgZ(0,"button",50),t.NdJ("click",function(){t.CHM(o);const a=t.oxw();return t.KtG(a.restartItemsDialog=!1)}),t.qZA(),t.TgZ(1,"button",52),t.NdJ("click",function(){t.CHM(o);const a=t.oxw();return t.KtG(a.confirmRestartSelected())}),t.qZA()}}const it=function(){return[10,20,30]},y=function(){return{width:"750px"}},m=function(){return{width:"450px"}},at=[{path:"",component:(()=>{class i{constructor(o,e,a,s){(0,n.Z)(this,"dbapi",void 0),(0,n.Z)(this,"messageService",void 0),(0,n.Z)(this,"authS",void 0),(0,n.Z)(this,"skNsCore",void 0),(0,n.Z)(this,"createDialog",!1),(0,n.Z)(this,"editDialog",!1),(0,n.Z)(this,"deleteItemDialog",!1),(0,n.Z)(this,"deleteItemsDialog",!1),(0,n.Z)(this,"restartItemDialog",!1),(0,n.Z)(this,"restartItemsDialog",!1),(0,n.Z)(this,"isLoadingTable",!1),(0,n.Z)(this,"data",[]),(0,n.Z)(this,"item",{}),(0,n.Z)(this,"selectedData",[]),(0,n.Z)(this,"submitted",!1),(0,n.Z)(this,"cols",[]),(0,n.Z)(this,"statuses",[]),(0,n.Z)(this,"dataOptions",[]),(0,n.Z)(this,"dataValue",[1]),(0,n.Z)(this,"rowsPerPageOptions",[5,10,20]),(0,n.Z)(this,"$destroy",new b.x),this.dbapi=o,this.messageService=e,this.authS=a,this.skNsCore=s,s.fromEvent("/ventas/formaspagos").pipe((0,Z.R)(this.$destroy)).subscribe(g=>{this.skNsCore.socketId!=g&&(console.log("Event socket: documentos fiscales"),this.getData())}),this.cols=[{field:"forpag_nid",header:"ID"},{field:"cia_vnombre",header:"Compa\xf1\xeda"},{field:"forpag_vcodigo",header:"C\xf3digo"},{field:"forpag_vdescripcion",header:"Descripci\xf3n"},{field:"forpag_ndprocentajeadicional",header:"Cobro adicional (%)"},{field:"forpag_vsts",header:"Estado"}],this.dataOptions=[{name:"ACTIVOS",value:[1]},{name:"ELIMINADOS",value:[0]},{name:"TODOS",value:[-1,0,1]}],this.getData()}getData(){this.isLoadingTable=!0,this.dbapi.getAll(this.dataValue).pipe((0,D.U)(o=>(o.forEach(e=>{e.cia_vnombre=e.cias?e.cias.cia_vnombre:"",e.forpag_vsts=1==e.forpag_nsts?"ACTIVO":"ELIMINADO"}),o)),(0,d.q)(1)).subscribe({next:o=>{this.data=[...o],this.isLoadingTable=!1},error:o=>{console.log(o),this.isLoadingTable=!1,this.editEvent({type:"error",title:"Ha ocurrido un error",message:o})}})}ngOnInit(){}openNew(){this.item={},this.submitted=!1,this.createDialog=!0}deleteSelectedData(){this.deleteItemsDialog=!0}restartSelectedItems(){this.restartItemsDialog=!0}editRow(o){this.item={...o},this.editDialog=!0}deleteRow(o){this.deleteItemDialog=!0,this.item={...o}}restartRow(o){this.restartItemDialog=!0,this.item={...o}}confirmDeleteSelected(){const o=[];this.selectedData.forEach(e=>{o.push({forpag_nid:e.forpag_nid,forpag_nsts:0})}),this.dbapi.setBulkSts(o).pipe((0,d.q)(1)).subscribe({next:e=>{this.messageService.add({severity:e.type,summary:e.title,detail:e.message,life:3e3}),"success"==e.type&&(this.skNsCore.notificarUpsert("/ventas/formaspagos",this.authS.isValidCia(!1).toString(),this.authS.usuario.user_nid.toString(),!0),this.deleteItemsDialog=!1,this.selectedData=[],this.getData())},error:e=>{console.log(e),this.editEvent({type:"error",title:"Ha ocurrido un error",message:e})}})}confirmDelete(){this.dbapi.setSts({forpag_nid:this.item.forpag_nid,forpag_nsts:0}).pipe((0,d.q)(1)).subscribe({next:e=>{this.skNsCore.notificarUpsert("/ventas/formaspagos",this.authS.isValidCia(!1).toString(),this.authS.usuario.user_nid.toString(),!0),this.messageService.add({severity:e.type,summary:e.title,detail:e.message,life:3e3}),this.deleteItemDialog=!1,this.item={},this.getData()},error:e=>{console.log(e),this.editEvent({type:"error",title:"Ha ocurrido un error",message:e})}})}confirmRestart(){this.item.forpag_nsts=1,this.dbapi.setSts(this.item).pipe((0,d.q)(1)).subscribe({next:o=>{this.skNsCore.notificarUpsert("/ventas/formaspagos",this.authS.isValidCia(!1).toString(),this.authS.usuario.user_nid.toString()),this.messageService.add({severity:o.type,summary:o.title,detail:o.message,life:3e3}),this.restartItemDialog=!1,this.item={},this.getData()},error:o=>{console.log(o),this.editEvent({type:"error",title:"Ha ocurrido un error",message:o})}})}confirmRestartSelected(){this.selectedData.forEach(o=>{o.forpag_nsts=1}),this.item.forpag_nsts=1,this.dbapi.setBulkSts(this.selectedData).pipe((0,d.q)(1)).subscribe({next:o=>{this.messageService.add({severity:o.type,summary:o.title,detail:o.message,life:3e3}),"success"==o.type&&(this.skNsCore.notificarUpsert("/ventas/formaspagos",this.authS.isValidCia(!1).toString(),this.authS.usuario.user_nid.toString()),this.restartItemsDialog=!1,this.selectedData=[],this.getData())},error:o=>{console.log(o),this.editEvent({type:"error",title:"Ha ocurrido un error",message:o})}})}findIndexById(o){let e=-1;for(let a=0;a<this.data.length;a++)if(this.data[a].forpag_nid===o){e=a;break}return e}onGlobalFilter(o,e){o.filterGlobal(e.target.value,"contains")}deleteSelectedItems(){this.deleteItemsDialog=!0}editEvent(o){this.messageService.add({severity:o.type,summary:o.title,detail:o.message,life:3e3}),"success"==o.type&&(this.getData(),this.createDialog=!1,this.editDialog=!1)}clearDataSelected(){this.selectedData=[]}ngOnDestroy(){this.$destroy.next(),this.$destroy.complete()}}return(0,n.Z)(i,"\u0275fac",function(o){return new(o||i)(t.Y36(C),t.Y36(u.ez),t.Y36(_.e),t.Y36(F.pP))}),(0,n.Z)(i,"\u0275cmp",t.Xpm({type:i,selectors:[["ng-component"]],features:[t._Bn([u.ez])],decls:38,vars:45,consts:[[1,"grid"],[1,"col-12"],[1,"card","px-6","py-6"],["position","bottom-right"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","right"],["responsiveLayout","scroll","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","selectionMode","multiple","dataKey","forpag_nid",3,"value","columns","rows","globalFilterFields","paginator","loading","rowsPerPageOptions","showCurrentPageReport","selection","rowHover","selectionChange"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["header","Crear forma pago",1,"p-fluid",3,"visible","modal","visibleChange"],[3,"edit"],["header","Editar forma pago",1,"p-fluid",3,"visible","modal","visibleChange"],[3,"FormaPago","edit"],["header","Confirmar...",3,"visible","modal","visibleChange"],[1,"flex","align-items-center","justify-content-center"],[1,"pi","pi-exclamation-triangle","mr-3",2,"font-size","2rem"],[4,"ngIf"],["pTemplate","footer"],["header","Confirmar",3,"visible","modal","visibleChange"],[1,"my-2"],[1,"mb-2"],["mode","basic","accept","image/*","label","Import","chooseLabel","Import",1,"mr-2","inline-block",3,"maxFileSize"],["pButton","","pRipple","","label","Export","icon","pi pi-upload",1,"p-button-help",3,"click"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"block","mt-2","md:mt-0","p-input-icon-rigth"],["pInputText","","type","text","placeholder","Buscar...",1,"w-full","sm:w-auto","mr-1",3,"input"],["pButton","","pRipple","","label","","icon","pi pi-sync",1,"p-button-secondary","mr-1","ml-1",3,"click"],["pButton","","pRipple","","label","Crear","icon","pi pi-plus",1,"p-button-success","mr-1","ml-1",3,"click"],["pButton","","pRipple","","label","Eliminar","icon","pi pi-trash","class","p-button-danger mr-1 ml-1 mt-1",3,"disabled","click",4,"ngIf"],["pButton","","pRipple","","label","Restaurar","icon","pi pi-replay","class","p-button-help mr-1 ml-1 mt-1",3,"disabled","click",4,"ngIf"],["optionLabel","name","optionValue","value",1,"ml-3","mt-1",3,"options","ngModel","ngStyle","ngModelChange","click"],["pButton","","pRipple","","label","Eliminar","icon","pi pi-trash",1,"p-button-danger","mr-1","ml-1","mt-1",3,"disabled","click"],["pButton","","pRipple","","label","Restaurar","icon","pi pi-replay",1,"p-button-help","mr-1","ml-1","mt-1",3,"disabled","click"],[2,"width","3rem"],["style","width: 100rem",3,"pSortableColumn","rowStyle","rowStyleId",4,"ngFor","ngForOf"],[2,"width","100rem",3,"pSortableColumn"],[3,"field"],[3,"value"],[1,"flex"],["pButton","","pRipple","","icon","pi pi-pencil","class","p-button-success mr-1",3,"click",4,"ngIf"],["pButton","","pRipple","","icon","pi pi-trash","title","Eliminar","class","p-button-danger",3,"click",4,"ngIf"],["pButton","","pRipple","","icon","pi pi-replay","title","Restaurar","class","p-button-help",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-success","mr-1",3,"click"],["pButton","","pRipple","","icon","pi pi-trash","title","Eliminar",1,"p-button-danger",3,"click"],["pButton","","pRipple","","icon","pi pi-replay","title","Restaurar",1,"p-button-help",3,"click"],[1,"p-column-title"],["pButton","","pRipple","","icon","pi pi-times","label","No",1,"p-button-outlined","p-button-secondary",3,"click"],["pButton","","pRipple","","icon","pi pi-check","label","Si",1,"p-button-outlined","p-button-danger",3,"click"],["pButton","","pRipple","","icon","pi pi-check","label","Si",1,"p-button-outlined","p-button-help",3,"click"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"p-toast",3),t.TgZ(4,"p-toolbar",4),t.YNc(5,E,3,0,"ng-template",5),t.YNc(6,j,2,1,"ng-template",6),t.qZA(),t.TgZ(7,"p-table",7,8),t.NdJ("selectionChange",function(s){return e.selectedData=s}),t.YNc(9,O,8,6,"ng-template",9),t.YNc(10,Q,6,1,"ng-template",10),t.YNc(11,$,9,5,"ng-template",11),t.qZA()(),t.TgZ(12,"p-dialog",12),t.NdJ("visibleChange",function(s){return e.createDialog=s}),t.TgZ(13,"app-create-formas-pagos",13),t.NdJ("edit",function(s){return e.editEvent(s)}),t.qZA()(),t.TgZ(14,"p-dialog",14),t.NdJ("visibleChange",function(s){return e.editDialog=s}),t.TgZ(15,"app-create-formas-pagos",15),t.NdJ("edit",function(s){return e.editEvent(s)}),t.qZA()(),t.TgZ(16,"p-dialog",16),t.NdJ("visibleChange",function(s){return e.deleteItemDialog=s}),t.TgZ(17,"div",17),t._UZ(18,"i",18),t.YNc(19,z,5,1,"span",19),t.qZA(),t.YNc(20,X,2,0,"ng-template",20),t.qZA(),t.TgZ(21,"p-dialog",21),t.NdJ("visibleChange",function(s){return e.deleteItemsDialog=s}),t.TgZ(22,"div",17),t._UZ(23,"i",18),t.TgZ(24,"span"),t._uU(25,"\xbfEst\xe1 seguro de que desea eliminar los elementos seleccionados?"),t.qZA()(),t.YNc(26,W,2,0,"ng-template",20),t.qZA(),t.TgZ(27,"p-dialog",16),t.NdJ("visibleChange",function(s){return e.restartItemDialog=s}),t.TgZ(28,"div",17),t._UZ(29,"i",18),t.YNc(30,tt,5,1,"span",19),t.qZA(),t.YNc(31,et,2,0,"ng-template",20),t.qZA(),t.TgZ(32,"p-dialog",21),t.NdJ("visibleChange",function(s){return e.restartItemsDialog=s}),t.TgZ(33,"div",17),t._UZ(34,"i",18),t.TgZ(35,"span"),t._uU(36,"\xbfEst\xe1 seguro de que desea restaurar los elementos seleccionados?"),t.qZA()(),t.YNc(37,ot,2,0,"ng-template",20),t.qZA()()()),2&o&&(t.xp6(7),t.Q6J("value",e.data)("columns",e.cols)("rows",10)("globalFilterFields",e.cols)("rows",10)("paginator",!0)("loading",e.isLoadingTable)("rowsPerPageOptions",t.DdM(38,it))("showCurrentPageReport",!0)("selection",e.selectedData)("rowHover",!0),t.xp6(5),t.Akn(t.DdM(39,y)),t.Q6J("visible",e.createDialog)("modal",!0),t.xp6(2),t.Akn(t.DdM(40,y)),t.Q6J("visible",e.editDialog)("modal",!0),t.xp6(1),t.Q6J("FormaPago",e.item),t.xp6(1),t.Akn(t.DdM(41,m)),t.Q6J("visible",e.deleteItemDialog)("modal",!0),t.xp6(3),t.Q6J("ngIf",e.item),t.xp6(2),t.Akn(t.DdM(42,m)),t.Q6J("visible",e.deleteItemsDialog)("modal",!0),t.xp6(6),t.Akn(t.DdM(43,m)),t.Q6J("visible",e.restartItemDialog)("modal",!0),t.xp6(3),t.Q6J("ngIf",e.item),t.xp6(2),t.Akn(t.DdM(44,m)),t.Q6J("visible",e.restartItemsDialog)("modal",!0))},dependencies:[f.sg,f.O5,f.PC,p.JJ,p.On,c.iA,u.jx,c.lQ,c.fz,c.UA,c.Mo,N.p,T.Hq,x.UN,A.H,J.FN,w.o,P.o,q.V,M],styles:[".rowStyle[_ngcontent-%COMP%]{width:14%;min-width:10rem}.rowStyleId[_ngcontent-%COMP%]{width:10%;min-width:6rem}"]})),i})()}];let nt=(()=>{class i{}return(0,n.Z)(i,"\u0275fac",function(o){return new(o||i)}),(0,n.Z)(i,"\u0275mod",t.oAB({type:i})),(0,n.Z)(i,"\u0275inj",t.cJS({imports:[S.m,v.Bz.forChild(at)]})),i})()}}]);